<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Modules &mdash; arboris-python 0.2.0-28-gd9f91f4 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.2.0-28-gd9f91f4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="arboris-python 0.2.0-28-gd9f91f4 documentation" href="index.html" />
    <link rel="next" title="Notations" href="notations.html" />
    <link rel="prev" title="Visualization" href="visu.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="notations.html" title="Notations"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="visu.html" title="Visualization"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">arboris-python 0.2.0-28-gd9f91f4 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="modules">
<h1>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h1>
<div class="section" id="core-the-core-of-the-simulator">
<h2><tt class="xref py py-mod docutils literal"><span class="pre">core</span></tt> &#8211; The core of the simulator<a class="headerlink" href="#core-the-core-of-the-simulator" title="Permalink to this headline">¶</a></h2>
<p class="graphviz">
<img src="_images/inheritance-d952f1edff78a313871d9a106dcc8f712832640b.png" alt="Inheritance diagram of arboris.core" usemap="#inheritance75bede9c9e" class="inheritance"/>
<map id="inheritance75bede9c9e" name="inheritance75bede9c9e">
<area shape="rect" id="node1" href="#arboris.core.Body" title="arboris.core.Body" alt="" coords="290,194,419,218"/>
<area shape="rect" id="node2" href="#arboris.core.NamedObject" title="A class for anything named to depend from." alt="" coords="25,336,208,360"/>
<area shape="rect" id="node4" href="#arboris.core.Constraint" title="A generic class for kinematic constraint." alt="" coords="274,241,435,266"/>
<area shape="rect" id="node5" href="#arboris.core.Controller" title="arboris.core.Controller" alt="" coords="276,289,433,313"/>
<area shape="rect" id="node7" href="#arboris.core.Joint" title="A generic class for ideal joints." alt="" coords="292,478,417,502"/>
<area shape="rect" id="node13" href="#arboris.core.Observer" title="arboris.core.Observer" alt="" coords="278,336,431,360"/>
<area shape="rect" id="node14" href="#arboris.core.Shape" title="A generic class for geometric shapes used in collision detection." alt="" coords="286,383,423,408"/>
<area shape="rect" id="node16" href="#arboris.core.World" title="arboris.core.World" alt="" coords="289,431,420,455"/>
<area shape="rect" id="node3" href="#arboris.core.Frame" title="A generic class for frames." alt="" coords="48,194,185,218"/>
<area shape="rect" id="node6" href="#arboris.core.DuplicateNameError" title="arboris.core.DuplicateNameError" alt="" coords="5,147,228,171"/>
<area shape="rect" id="node11" href="#arboris.core.LinearConfigurationSpaceJoint" title="Joints whose configuration space is diffeomorph to `\Real{ndof}`." alt="" coords="481,478,763,502"/>
<area shape="rect" id="node8" title="Model a rigid motion, including relative pose and velocity" alt="" coords="12,478,221,502"/>
<area shape="rect" id="node9" href="#arboris.core.JointsList" title="arboris.core.JointsList" alt="" coords="278,99,431,124"/>
<area shape="rect" id="node10" href="#arboris.core.NamedObjectsList" title="A list of (possibly) NamedObjects." alt="" coords="12,99,221,124"/>
<area shape="rect" id="node12" href="#arboris.core.MovingSubFrame" title="arboris.core.MovingSubFrame" alt="" coords="15,52,218,76"/>
<area shape="rect" id="node15" href="#arboris.core.SubFrame" title="arboris.core.SubFrame" alt="" coords="36,4,196,29"/>
</map>
</p>
<span class="target" id="module-arboris.core"></span><p>The core of the simulator.</p>
<p>A world (instance of the <a class="reference internal" href="#arboris.core.World" title="arboris.core.World"><tt class="xref py py-class docutils literal"><span class="pre">World</span></tt></a> class) consists of bodies (instances
of the <a class="reference internal" href="#arboris.core.Body" title="arboris.core.Body"><tt class="xref py py-class docutils literal"><span class="pre">Body</span></tt></a> class) interlinked by joints (instances of <a class="reference internal" href="#arboris.core.Joint" title="arboris.core.Joint"><tt class="xref py py-class docutils literal"><span class="pre">Joint</span></tt></a>
subclasses). Joints serve two purposes in arboris:</p>
<ul class="simple">
<li>restrict the relative motion between bodies (for instance a hinge joint only
allows for rotations around its axis)</li>
<li>and parametrize the bodies positions (for instance a single angle is enough
to parametrize the relative position of two bodies constrained by a hinge
joint).</li>
</ul>
<p>A world forms an oriented tree whose nodes are the bodies and edges are the
joints, so that the state (pose and velocity) of each body can be computed from
the state of its parent joints (the joints on the path from the body to the
root of the tree (which is body called &#8220;ground&#8221;)).</p>
<p>One or more frames (instances of the <a class="reference internal" href="#arboris.core.SubFrame" title="arboris.core.SubFrame"><tt class="xref py py-class docutils literal"><span class="pre">SubFrame</span></tt></a> class) can be associated
to bodies and serve as anchor points to the joints.</p>
<dl class="class">
<dt id="arboris.core.Body">
<em class="property">class </em><tt class="descclassname">arboris.core.</tt><tt class="descname">Body</tt><big>(</big><em>name=None</em>, <em>mass=None</em>, <em>viscosity=None</em><big>)</big><a class="headerlink" href="#arboris.core.Body" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="arboris.core.Body.body">
<tt class="descname">body</tt><a class="headerlink" href="#arboris.core.Body.body" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.Body.bpose">
<tt class="descname">bpose</tt><a class="headerlink" href="#arboris.core.Body.bpose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.Body.djacobian">
<tt class="descname">djacobian</tt><a class="headerlink" href="#arboris.core.Body.djacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.core.Body.iter_ancestor_bodies">
<tt class="descname">iter_ancestor_bodies</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.Body.iter_ancestor_bodies" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.core.Body.iter_ancestor_joints">
<tt class="descname">iter_ancestor_joints</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.Body.iter_ancestor_joints" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.core.Body.iter_descendant_bodies">
<tt class="descname">iter_descendant_bodies</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.Body.iter_descendant_bodies" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all descendant bodies, with a depth-first strategy.</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.Body.iter_descendant_joints">
<tt class="descname">iter_descendant_joints</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.Body.iter_descendant_joints" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all descendant joints, with a depth-first strategy.</p>
</dd></dl>

<dl class="attribute">
<dt id="arboris.core.Body.jacobian">
<tt class="descname">jacobian</tt><a class="headerlink" href="#arboris.core.Body.jacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.Body.nleffects">
<tt class="descname">nleffects</tt><a class="headerlink" href="#arboris.core.Body.nleffects" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.Body.pose">
<tt class="descname">pose</tt><a class="headerlink" href="#arboris.core.Body.pose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.Body.twist">
<tt class="descname">twist</tt><a class="headerlink" href="#arboris.core.Body.twist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.core.Body.update_dynamic">
<tt class="descname">update_dynamic</tt><big>(</big><em>pose</em>, <em>jac</em>, <em>djac</em>, <em>twist</em><big>)</big><a class="headerlink" href="#arboris.core.Body.update_dynamic" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the body <tt class="docutils literal"><span class="pre">pose,</span> <span class="pre">jac,</span> <span class="pre">djac,</span> <span class="pre">twist</span></tt> and its children ones.</p>
<p>This method (1) sets the body dynamical model (pose, jacobian,
hessian and twist) to the values given as argument, (2) computes
the dynamical model of the children bodies and (3) call the
equivalent method on them.</p>
<p>As a result, the dynamical model of all the bodies is computed
recursively.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>pose</strong> (<em>4x4 ndarray</em>) &#8211; the body pose relative to the ground: <img class="math" src="_images/math/8d85b5771c56c88a07e79519a5ec1f4109b56200.png" alt="H_{gb}"/></li>
<li><strong>jac</strong> (<em>6x(ndof) ndarray</em>) &#8211; the body jacobian relative to the world (in body frame):
<img class="math" src="_images/math/27223ff7bed8ecdb8e92f99ef4467542c6ae9768.png" alt="\J[b]_{b/g}"/></li>
<li><strong>djac</strong> &#8211; the derivative of the body jacobian: <img class="math" src="_images/math/aadba67599a0d7cfbe2d036c8bb84c329b331077.png" alt="\dJ[b]_{b/g}"/></li>
<li><strong>twist</strong> (<em>6 ndarray</em>) &#8211; the body twist: <img class="math" src="_images/math/fdfcc620ca0a43700f9987d6b4eda54d0f60b49f.png" alt="\twist[b]_{b/g}"/></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Algorithm:</strong></p>
<p>Let&#8217;s define the following notations:</p>
<ul class="simple">
<li><img class="math" src="_images/math/8359c7a441a40d56b1598d67a0390aa3394e6bc4.png" alt="g"/>: the ground body,</li>
<li><img class="math" src="_images/math/9f5f8a23e4a542a0ec82c58299fe25f342af47fe.png" alt="p"/>: the parent body (which is the present <tt class="xref py py-class docutils literal"><span class="pre">arboris.Body</span></tt>
instance)</li>
<li><img class="math" src="_images/math/e9b342a5f4d78887f98017548d07e7e08c8591b7.png" alt="c"/>: a child body,</li>
<li><img class="math" src="_images/math/89012980a84606dec5992ff96430bd89035d07c3.png" alt="j"/>: the joint between the bodies <img class="math" src="_images/math/9f5f8a23e4a542a0ec82c58299fe25f342af47fe.png" alt="p"/> and <img class="math" src="_images/math/e9b342a5f4d78887f98017548d07e7e08c8591b7.png" alt="c"/>,</li>
<li><img class="math" src="_images/math/54b306b84bd72563394127b55350e478bb5b06f7.png" alt="r"/>: reference frame of the joint <img class="math" src="_images/math/89012980a84606dec5992ff96430bd89035d07c3.png" alt="j"/>, rigidly fixed to the parent
body</li>
<li><img class="math" src="_images/math/37472d05b0c3d7e0a7f1aa2ff4a51837145b672c.png" alt="n"/>: new frame of the joint <img class="math" src="_images/math/89012980a84606dec5992ff96430bd89035d07c3.png" alt="j"/>, rigidly fixed to the child body</li>
</ul>
<a class="reference internal image-reference" href="_images/body_model.svg"><img src="_images/body_model.svg" width="300px" /></a>
<p>One can notice that <img class="math" src="_images/math/8ed793e21efcf7ad4457075743fcf04b5f20aff8.png" alt="H_{nc}"/> and <img class="math" src="_images/math/01ff735c44a26bebece29ac1e8a1628c6634a3ca.png" alt="H_{pr}"/> are constant.</p>
<p>The child body pose can be computed as</p>
<div class="math">
<p><img src="_images/math/c1556c0dfc4712b4218bf28a095416b57e9d2ec3.png" alt="H_{gc} &amp;= H_{gp} \; H_{pc} \\
       &amp;= H_{gp} \; (H_{pr} \; H_{rn} \; H_{nc})"/></p>
</div><p>where <img class="math" src="_images/math/cad6e21838e75c941519920779a98d1aa842e0f7.png" alt="H_{rn}"/> depends on the joint generalized configuration and is
given by its <tt class="xref py py-attr docutils literal"><span class="pre">pose</span></tt> attribute.</p>
<p>The chil body twist is given as</p>
<div class="math">
<p><img src="_images/math/ef7b1a4a44add963d301fd6d1def2a734269eb80.png" alt="\twist[c]_{c/g} &amp;= \Ad_{cp} \; \twist[p]_{p/g} + \twist[c]_{c/p} \\
&amp;= \Ad_{cp} \; \twist[p]_{p/g} + \Ad_{cn} \; \twist[n]_{n/r} \\
&amp;= \Ad_{cp} \; \J[p]_{p/g} \; \GVel
   + \Ad_{cn} \; \J[n]_{n/r} \; \GVel_j \\
&amp;= \J[c]_{c/g} \; \GVel"/></p>
</div><p>where  <img class="math" src="_images/math/06410c86a2edb076bb271a085dbd92c2fe611096.png" alt="\twist[n]_{n/r}"/> is given by the joint
<a class="reference internal" href="#arboris.core.Joint.twist" title="arboris.core.Joint.twist"><tt class="xref py py-attr docutils literal"><span class="pre">twist</span></tt></a> attribute.
<img class="math" src="_images/math/7866270daba7ae6ee73aa40f934cf9ea88ff647b.png" alt="\GVel_j"/> is the generalized velocity of the joint <img class="math" src="_images/math/89012980a84606dec5992ff96430bd89035d07c3.png" alt="j"/> and is
related to the world generalized velocity by trivial projection</p>
<div class="math">
<p><img src="_images/math/442cbd18d629c4cb33b19396e40ab13cbe49b125.png" alt="\GVel_j &amp;=
    \begin{bmatrix}
        0 &amp; \cdots &amp;0 &amp; I &amp; 0 &amp; \cdots &amp; 0
    \end{bmatrix} \; \GVel"/></p>
</div><p>therefore, the child body jacobian is</p>
<div class="math">
<p><img src="_images/math/016c119af2f2bd605fec3c24c0a729eecbe15617.png" alt="\J[c]_{c/g} &amp;= \Ad_{cp} \; \J[p]_{p/g} +
\begin{bmatrix}
0 &amp; \cdots &amp; 0 &amp; \Ad_{cn} \; \J[n]_{n/r} &amp; 0 &amp; \cdots &amp; 0
\end{bmatrix} \\"/></p>
</div><p>where <img class="math" src="_images/math/91e89d6e0bb58d1b696269e4b21a1694848f42da.png" alt="\J[n]_{n/r}"/> is given by the joint
<a class="reference internal" href="#arboris.core.Joint.jacobian" title="arboris.core.Joint.jacobian"><tt class="xref py py-attr docutils literal"><span class="pre">jacobian</span></tt></a> attribute. Derivating the previous
expression leads to the child body acceleration:</p>
<div class="math">
<p><img src="_images/math/1ab0623ea511cf877f81aa63e6a1e299d224c2c5.png" alt="\dtwist[c]_{c/g} &amp;= \dAd_{cp} \; \J[p]_{p/g} \; \GVel
+ \Ad_{cp} \; \dJ[p]_{p/g} \; \GVel
+ \Ad_{cp} \; \J[p]_g \; \dGVel
+ \Ad_{cn} \; \dJ[n]_{n/r} \; \GVel_j
+ \Ad_{cn} \; \J[n]_{m/r} \dGVel_j \\
&amp;= \J[c]_{c/g} \; \dGVel + \dJ[c]_{c/g} \; \GVel"/></p>
</div><p>the expression of the child body hessian is then obtained by
identification:</p>
<div class="math">
<p><img src="_images/math/1bf627bcff49da5651f8c0cf29d33a3c3c225009.png" alt="\dJ[c]_{c/g} \; \GVel
&amp;= \dAd_{cp} \; \J[p]_{p/g}  \; \GVel
+  \Ad_{cp}  \; \dJ[p]_{p/g} \; \GVel
+  \Ad_{cn}  \; \dJ[n]_{n/r} \; \GVel_j \\

\dJ[c]_{c/g}
&amp;= \dAd_{cp} \; \J[p]_{p/g} + \Ad_{cp} \; \dJ[p]_{p/g} +
\begin{bmatrix}
0 &amp; \cdots &amp; 0 &amp; (\Ad_{cn} \; \dJ[n]_{n/r}) &amp; 0 &amp; \cdots &amp; 0
\end{bmatrix}"/></p>
</div><p>with</p>
<div class="math">
<p><img src="_images/math/556fd658cd8323edf81dd23f21a1433a26acfbd6.png" alt="\dAd_{cp} &amp;= \Ad_{cn} \; \dAd_{nr} \; \Ad_{rp}"/></p>
</div><p>and where <img class="math" src="_images/math/fd1cec5816f1e0078ffb847c96a6675f4896e5d0.png" alt="\dAd_{nr}"/> and <img class="math" src="_images/math/09477574fe0e49809561043f9f482cc7632dbef4.png" alt="\dJ[n]_{n/r}"/> are respectively given by
the joint <tt class="xref py py-attr docutils literal"><span class="pre">idadjoint</span></tt> and
<a class="reference internal" href="#arboris.core.Joint.djacobian" title="arboris.core.Joint.djacobian"><tt class="xref py py-attr docutils literal"><span class="pre">djacobian</span></tt></a> attributes.</p>
<p>T_ab: velocity of {a} relative to {b} expressed in {a} (body twist)</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.Body.update_geometric">
<tt class="descname">update_geometric</tt><big>(</big><em>pose</em><big>)</big><a class="headerlink" href="#arboris.core.Body.update_geometric" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pose</strong> (<em>(4,4)-array</em>) &#8211; current pose of the body, relative to the ground</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>g: ground body</li>
<li>p: parent body</li>
<li>c: child body</li>
<li>r: reference frame of the joint, rigidly fixed to the parent body</li>
<li>n: new frame of the joint, rigidly fixed to the child body</li>
</ul>
<p>so H_nc and H_pr are constant.</p>
<div class="math">
<p><img src="_images/math/81856f7f02bc771e1dd05f3678250d98c1cd66a2.png" alt="H_gc &amp;= H_{gp} \ H_{pc} \\
     &amp;= H_{gp} \ (H_{pr} \ H_{rn} \ H_{nc})"/></p>
</div></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.core.Constraint">
<em class="property">class </em><tt class="descclassname">arboris.core.</tt><tt class="descname">Constraint</tt><big>(</big><em>name=None</em><big>)</big><a class="headerlink" href="#arboris.core.Constraint" title="Permalink to this definition">¶</a></dt>
<dd><p>A generic class for kinematic constraint.</p>
<p>As a joint, it represents a kinematic restriction of the allowed relative
twist of two frames. But here, this restriction is not directly taken into
account in the model, but it is defined through a force. It generally
represents kinematic closure that are not modeled by tree-structure system.</p>
<p>This class has virtual methods and properties. It should be
subclassed by concrete implementations.</p>
<dl class="method">
<dt id="arboris.core.Constraint.disable">
<tt class="descname">disable</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.Constraint.disable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.core.Constraint.enable">
<tt class="descname">enable</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.Constraint.enable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.Constraint.gforce">
<tt class="descname">gforce</tt><a class="headerlink" href="#arboris.core.Constraint.gforce" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.core.Constraint.init">
<tt class="descname">init</tt><big>(</big><em>world</em><big>)</big><a class="headerlink" href="#arboris.core.Constraint.init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.core.Constraint.is_active">
<tt class="descname">is_active</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.Constraint.is_active" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.core.Constraint.is_enabled">
<tt class="descname">is_enabled</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.Constraint.is_enabled" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.Constraint.jacobian">
<tt class="descname">jacobian</tt><a class="headerlink" href="#arboris.core.Constraint.jacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.Constraint.ndol">
<tt class="descname">ndol</tt><a class="headerlink" href="#arboris.core.Constraint.ndol" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of degrees of linkage.</p>
<p>In french: <em>nombre de degrés de liaison</em>. This is equal to (6 - ndof).</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.Constraint.solve">
<tt class="descname">solve</tt><big>(</big><em>vel</em>, <em>admittance</em>, <em>dt</em><big>)</big><a class="headerlink" href="#arboris.core.Constraint.solve" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.core.Constraint.update">
<tt class="descname">update</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#arboris.core.Constraint.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.core.Controller">
<em class="property">class </em><tt class="descclassname">arboris.core.</tt><tt class="descname">Controller</tt><big>(</big><em>name=None</em><big>)</big><a class="headerlink" href="#arboris.core.Controller" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="arboris.core.Controller.init">
<tt class="descname">init</tt><big>(</big><em>world</em><big>)</big><a class="headerlink" href="#arboris.core.Controller.init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.core.Controller.update">
<tt class="descname">update</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#arboris.core.Controller.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="exception">
<dt id="arboris.core.DuplicateNameError">
<em class="property">exception </em><tt class="descclassname">arboris.core.</tt><tt class="descname">DuplicateNameError</tt><big>(</big><em>message</em><big>)</big><a class="headerlink" href="#arboris.core.DuplicateNameError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="arboris.core.Frame">
<em class="property">class </em><tt class="descclassname">arboris.core.</tt><tt class="descname">Frame</tt><a class="headerlink" href="#arboris.core.Frame" title="Permalink to this definition">¶</a></dt>
<dd><p>A generic class for frames.</p>
<dl class="attribute">
<dt id="arboris.core.Frame.body">
<tt class="descname">body</tt><a class="headerlink" href="#arboris.core.Frame.body" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.Frame.bpose">
<tt class="descname">bpose</tt><a class="headerlink" href="#arboris.core.Frame.bpose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.Frame.djacobian">
<tt class="descname">djacobian</tt><a class="headerlink" href="#arboris.core.Frame.djacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.Frame.jacobian">
<tt class="descname">jacobian</tt><a class="headerlink" href="#arboris.core.Frame.jacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.Frame.pose">
<tt class="descname">pose</tt><a class="headerlink" href="#arboris.core.Frame.pose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.Frame.twist">
<tt class="descname">twist</tt><a class="headerlink" href="#arboris.core.Frame.twist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.core.Joint">
<em class="property">class </em><tt class="descclassname">arboris.core.</tt><tt class="descname">Joint</tt><big>(</big><em>name=None</em><big>)</big><a class="headerlink" href="#arboris.core.Joint" title="Permalink to this definition">¶</a></dt>
<dd><p>A generic class for ideal joints.</p>
<p>An ideal joint is a kinematic restriction of the allowed relative
twist of two frames, here named frames 0 and 1, to which the joint
is said to be attached. In arboris, it serves to parametrize the
relative position and velocity of frame 1 regarding to frame 0.</p>
<p>This class has virtual methods and properties. It should be
subclassed by concrete implementations.</p>
<dl class="attribute">
<dt id="arboris.core.Joint.djacobian">
<tt class="descname">djacobian</tt><a class="headerlink" href="#arboris.core.Joint.djacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.Joint.dof">
<tt class="descname">dof</tt><a class="headerlink" href="#arboris.core.Joint.dof" title="Permalink to this definition">¶</a></dt>
<dd><p>joint dofs index mapping in the world gvel vector.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">a <tt class="docutils literal"><span class="pre">slice</span></tt> (start_index, end_index, 1)</td>
</tr>
<tr class="field-even field"><th class="field-name">Raise:</th><td class="field-body">ValueError if World initialize method <tt class="xref py py-meth docutils literal"><span class="pre">init()</span></tt> has not been called</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="arboris.core.Joint.frame0">
<tt class="descname">frame0</tt><a class="headerlink" href="#arboris.core.Joint.frame0" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.Joint.frame1">
<tt class="descname">frame1</tt><a class="headerlink" href="#arboris.core.Joint.frame1" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.Joint.frames">
<tt class="descname">frames</tt><a class="headerlink" href="#arboris.core.Joint.frames" title="Permalink to this definition">¶</a></dt>
<dd><p>Frames to which the joint is attached.</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.Joint.integrate">
<tt class="descname">integrate</tt><big>(</big><em>gvel</em>, <em>dt</em><big>)</big><a class="headerlink" href="#arboris.core.Joint.integrate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.Joint.jacobian">
<tt class="descname">jacobian</tt><a class="headerlink" href="#arboris.core.Joint.jacobian" title="Permalink to this definition">¶</a></dt>
<dd><p>Jacobian of the joint relative position.</p>
<p>Return the matrix <img class="math" src="_images/math/d93aceae8a45fba63bcde6d7e3cb0d6dc6d14d44.png" alt="\J"/> such that <img class="math" src="_images/math/ba2a7552e62dee75ed17d0c539a37e95c30b1098.png" alt="\twist[1]_{1/0} = \J \nu"/>.
Or, with numpy notation, <tt class="docutils literal"><span class="pre">j.twist</span> <span class="pre">==</span> <span class="pre">dot(j.jacobian,</span> <span class="pre">j.gvel)</span></tt>.</p>
<p>This matrix generally changes with the joint generalized position.</p>
</dd></dl>

<dl class="attribute">
<dt id="arboris.core.Joint.ndof">
<tt class="descname">ndof</tt><a class="headerlink" href="#arboris.core.Joint.ndof" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of degrees of freedom of the joint.</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.Joint.set_frames">
<tt class="descname">set_frames</tt><big>(</big><em>frame0</em>, <em>frame1</em><big>)</big><a class="headerlink" href="#arboris.core.Joint.set_frames" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.Joint.twist">
<tt class="descname">twist</tt><a class="headerlink" href="#arboris.core.Joint.twist" title="Permalink to this definition">¶</a></dt>
<dd><p>Relative twist <img class="math" src="_images/math/28bc344cbd086174e29226298b680e75b7f94dbe.png" alt="\twist[1]_{1/0}"/>.</p>
<p>It is the twist of frame 1 regarding to frame 0 expressed in frame 1.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.core.JointsList">
<em class="property">class </em><tt class="descclassname">arboris.core.</tt><tt class="descname">JointsList</tt><big>(</big><em>iterable</em><big>)</big><a class="headerlink" href="#arboris.core.JointsList" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="arboris.core.JointsList.dof">
<tt class="descname">dof</tt><a class="headerlink" href="#arboris.core.JointsList.dof" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.core.LinearConfigurationSpaceJoint">
<em class="property">class </em><tt class="descclassname">arboris.core.</tt><tt class="descname">LinearConfigurationSpaceJoint</tt><big>(</big><em>gpos=None</em>, <em>gvel=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.core.LinearConfigurationSpaceJoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Joints whose configuration space is diffeomorph to <img class="math" src="_images/math/65765472d83c7c7ccc6210a4f088256eefe4ef16.png" alt="\Real{ndof}"/>.</p>
<dl class="method">
<dt id="arboris.core.LinearConfigurationSpaceJoint.integrate">
<tt class="descname">integrate</tt><big>(</big><em>gvel</em>, <em>dt</em><big>)</big><a class="headerlink" href="#arboris.core.LinearConfigurationSpaceJoint.integrate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.core.MovingSubFrame">
<em class="property">class </em><tt class="descclassname">arboris.core.</tt><tt class="descname">MovingSubFrame</tt><big>(</big><em>body</em>, <em>bpose=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.core.MovingSubFrame" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a frame rigidly fixed to a body.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>body</strong> (class:<img class="math" src="_images/math/aa2b5e2c9ecafeddbe2dcfb2e177cadd7d142363.png" alt="~arboris.core.Body"/>) &#8211; parent body which will support this subframe</li>
<li><strong>bpose</strong> (<em>(4,4)-array</em>) &#8211; the homogeneous matrix from the parent body to the subframe</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the name of the subframe</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Body</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">SubFrame</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">Hg</span><span class="o">.</span><span class="n">rotz</span><span class="p">(</span><span class="mf">3.14</span><span class="o">/</span><span class="mf">3.</span><span class="p">),</span><span class="s">&#39;Brand New Frame&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">body</span></tt> argument must be a member of the <tt class="docutils literal"><span class="pre">Body</span></tt> class:
&gt;&gt;&gt; f = SubFrame(None, Hg.rotz(3.14/3.))
Traceback (most recent call last):
...
ValueError: The <tt class="docutils literal"><span class="pre">body</span></tt> argument must be an instance of the <tt class="docutils literal"><span class="pre">Boby</span></tt> class</p>
<p>The <tt class="docutils literal"><span class="pre">bpose</span></tt> argument must be an homogeneous matrix:
&gt;&gt;&gt; b = Body()
&gt;&gt;&gt; from numpy import ones
&gt;&gt;&gt; f = SubFrame(b, ones((4,4)))
Traceback (most recent call last):
...
AssertionError</p>
<dl class="attribute">
<dt id="arboris.core.MovingSubFrame.bpose">
<tt class="descname">bpose</tt><a class="headerlink" href="#arboris.core.MovingSubFrame.bpose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.core.NamedObject">
<em class="property">class </em><tt class="descclassname">arboris.core.</tt><tt class="descname">NamedObject</tt><big>(</big><em>name=None</em><big>)</big><a class="headerlink" href="#arboris.core.NamedObject" title="Permalink to this definition">¶</a></dt>
<dd><p>A class for anything named to depend from.</p>
</dd></dl>

<dl class="class">
<dt id="arboris.core.NamedObjectsList">
<em class="property">class </em><tt class="descclassname">arboris.core.</tt><tt class="descname">NamedObjectsList</tt><big>(</big><em>iterable=None</em><big>)</big><a class="headerlink" href="#arboris.core.NamedObjectsList" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of (possibly) NamedObjects.</p>
<p>This class behaves like the built-in <tt class="docutils literal"><span class="pre">list</span></tt> class except that
objects can be retrieved by name, using a string index or the
<tt class="docutils literal"><span class="pre">find</span></tt> method. In the first case, the first matching object is
returned, in the second case a (raw) list of matching objects is
returned.</p>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="n">Body</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Jean-Paul&quot;</span><span class="p">),</span> <span class="mf">1.</span><span class="p">,</span> <span class="s">&#39;sss&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NL</span> <span class="o">=</span> <span class="n">NamedObjectsList</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NL</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Body</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">u&#39;Guard&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NL</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Body</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">u&#39;Jean-Paul&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NL</span><span class="p">[</span><span class="s">&#39;Guard&#39;</span><span class="p">]</span> 
<span class="go">&lt;arboris.core.Body object named &quot;Guard&quot; at &quot;0x...&quot;)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NL</span><span class="p">[</span><span class="s">&#39;Jean-Paul&#39;</span><span class="p">]</span> 
<span class="go">&lt;arboris.core.Body object named &quot;Jean-Paul&quot; at &quot;0x...&quot;)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NL</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;Jean-Paul&#39;</span><span class="p">)</span> 
<span class="go">[&lt;arboris.core.Body object named &quot;Jean-Paul&quot; at &quot;0x...&quot;)&gt;, &lt;arboris.core.Body object named &quot;Jean-Paul&quot; at &quot;0x...&quot;)&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NL</span><span class="p">[</span><span class="s">&#39;Jean-Marie&#39;</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">KeyError</span>: <span class="n">&#39;No object named &quot;Jean-Marie&quot;.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NL</span><span class="p">[</span><span class="s">&#39;Jean-Paul&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">TypeError</span>: <span class="n">list indices must be integers, not str</span>
</pre></div>
</div>
<dl class="method">
<dt id="arboris.core.NamedObjectsList.as_dict">
<tt class="descname">as_dict</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.NamedObjectsList.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert named-list as dict {&#8216;name&#8217;: object}.</p>
<p>Returns a dictionary whose keys are the objects names and
values are the objects themselves. Objects with no name are
ignored. Duplicate names raise a <tt class="docutils literal"><span class="pre">DuplicateName</span></tt>
exception.</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.NamedObjectsList.find">
<tt class="descname">find</tt><big>(</big><em>name</em><big>)</big><a class="headerlink" href="#arboris.core.NamedObjectsList.find" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.core.Observer">
<em class="property">class </em><tt class="descclassname">arboris.core.</tt><tt class="descname">Observer</tt><big>(</big><em>name=None</em><big>)</big><a class="headerlink" href="#arboris.core.Observer" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="arboris.core.Observer.finish">
<tt class="descname">finish</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.Observer.finish" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.core.Observer.init">
<tt class="descname">init</tt><big>(</big><em>world</em>, <em>timeline</em><big>)</big><a class="headerlink" href="#arboris.core.Observer.init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.core.Observer.update">
<tt class="descname">update</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#arboris.core.Observer.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.core.Shape">
<em class="property">class </em><tt class="descclassname">arboris.core.</tt><tt class="descname">Shape</tt><big>(</big><em>frame</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.core.Shape" title="Permalink to this definition">¶</a></dt>
<dd><p>A generic class for geometric shapes used in collision detection.</p>
</dd></dl>

<dl class="class">
<dt id="arboris.core.SubFrame">
<em class="property">class </em><tt class="descclassname">arboris.core.</tt><tt class="descname">SubFrame</tt><big>(</big><em>body</em>, <em>bpose=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.core.SubFrame" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a frame rigidly fixed to a body.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>body</strong> (class:<img class="math" src="_images/math/aa2b5e2c9ecafeddbe2dcfb2e177cadd7d142363.png" alt="~arboris.core.Body"/>) &#8211; parent body which will support this subframe</li>
<li><strong>bpose</strong> (<em>(4,4)-array</em>) &#8211; the homogeneous matrix from the parent body to the subframe</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the name of the subframe</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Body</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">SubFrame</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">Hg</span><span class="o">.</span><span class="n">rotz</span><span class="p">(</span><span class="mf">3.14</span><span class="o">/</span><span class="mf">3.</span><span class="p">),</span><span class="s">&#39;Brand New Frame&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">body</span></tt> argument must be a member of the <tt class="docutils literal"><span class="pre">Body</span></tt> class:
&gt;&gt;&gt; f = SubFrame(None, Hg.rotz(3.14/3.))
Traceback (most recent call last):
...
ValueError: The <tt class="docutils literal"><span class="pre">body</span></tt> argument must be an instance of the <tt class="docutils literal"><span class="pre">Boby</span></tt> class</p>
<p>The <tt class="docutils literal"><span class="pre">bpose</span></tt> argument must be an homogeneous matrix:
&gt;&gt;&gt; b = Body()
&gt;&gt;&gt; from numpy import ones
&gt;&gt;&gt; f = SubFrame(b, ones((4,4)))
Traceback (most recent call last):
...
AssertionError</p>
<dl class="attribute">
<dt id="arboris.core.SubFrame.bpose">
<tt class="descname">bpose</tt><a class="headerlink" href="#arboris.core.SubFrame.bpose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.core.World">
<em class="property">class </em><tt class="descclassname">arboris.core.</tt><tt class="descname">World</tt><big>(</big><em>name=None</em><big>)</big><a class="headerlink" href="#arboris.core.World" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="arboris.core.World.add_link">
<tt class="descname">add_link</tt><big>(</big><em>frame0</em>, <em>joint</em>, <em>frame1</em>, <em>*args</em><big>)</big><a class="headerlink" href="#arboris.core.World.add_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a link (ie. Joint and Body) to the world.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>frame0</strong> (class:<img class="math" src="_images/math/ed62172cdb3423a1a78a4a5664d156ca310c047c.png" alt="~arboris.core.Frame"/>) &#8211; the frame where the new joint will be attached.
It should belong to a body which is already in the world.</li>
<li><strong>joint</strong> (class:<img class="math" src="_images/math/3ebef3abb4e1a8b5b6a04d4fe388f93d91d7e8ff.png" alt="~arboris.core.Joint"/>) &#8211; the joint to be added.</li>
<li><strong>frame1</strong> (class:<img class="math" src="_images/math/ed62172cdb3423a1a78a4a5664d156ca310c047c.png" alt="~arboris.core.Frame"/>) &#8211; the frame of the body which is to be added to the world.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>One can also add several links at a time:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">world</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="n">frame0_a</span><span class="p">,</span><span class="n">joint_a</span><span class="p">,</span><span class="n">frame1_a</span><span class="p">,</span><span class="n">frame0_b</span><span class="p">,</span><span class="n">joint_b</span><span class="p">,</span><span class="n">frame1_b</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="arboris.core.World.admittance">
<tt class="descname">admittance</tt><a class="headerlink" href="#arboris.core.World.admittance" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.World.current_time">
<tt class="descname">current_time</tt><a class="headerlink" href="#arboris.core.World.current_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.core.World.getbodies">
<tt class="descname">getbodies</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.World.getbodies" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a NamedObjectsList of the world bodies.</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.World.getconstraints">
<tt class="descname">getconstraints</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.World.getconstraints" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a NamedObjectsList of the world constraints.</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.World.getcontrollers">
<tt class="descname">getcontrollers</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.World.getcontrollers" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a NamedObjectsList of the world controllers.</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.World.getframes">
<tt class="descname">getframes</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.World.getframes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a NamedObjectsList of the world frames.</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.World.getjoints">
<tt class="descname">getjoints</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.World.getjoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a JointsList of the joints.</p>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">simplearm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">joints</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getjoints</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">joints</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> 
<span class="go">&lt;arboris.joints.RzJoint object named &quot;Elbow&quot; at &quot;0x...&quot;)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">joints</span><span class="p">[</span><span class="s">&#39;Elbow&#39;</span><span class="p">]</span> 
<span class="go">&lt;arboris.joints.RzJoint object named &quot;Elbow&quot; at &quot;0x...&quot;)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">joints</span><span class="o">.</span><span class="n">dof</span>
<span class="go">slice(0, 3, None)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="arboris.core.World.getshapes">
<tt class="descname">getshapes</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.World.getshapes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a NamedObjectsList of the world shapes.</p>
</dd></dl>

<dl class="attribute">
<dt id="arboris.core.World.gforce">
<tt class="descname">gforce</tt><a class="headerlink" href="#arboris.core.World.gforce" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.World.gvel">
<tt class="descname">gvel</tt><a class="headerlink" href="#arboris.core.World.gvel" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.core.World.init">
<tt class="descname">init</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.World.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Init the joints-space model of the world.</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.World.integrate">
<tt class="descname">integrate</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#arboris.core.World.integrate" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dt</strong> (<em>float</em>) &#8211; integration time</td>
</tr>
</tbody>
</table>
<p>From the <a class="reference internal" href="#arboris.core.World.update_controllers" title="arboris.core.World.update_controllers"><tt class="xref py py-meth docutils literal"><span class="pre">update_controllers()</span></tt></a> and
<a class="reference internal" href="#arboris.core.World.update_constraints" title="arboris.core.World.update_constraints"><tt class="xref py py-meth docutils literal"><span class="pre">update_constraints()</span></tt></a> methods we get the new
generalized velocity.</p>
<div class="math">
<p><img src="_images/math/9623e1144d6cd480969f594aa23f0d2ac25348ad.png" alt="\GVel(t+dt) &amp;= Y(t) \left(
\frac{M(t)}{dt} \GVel(t)
+ \sum_{c=\text{controllers}} \GForce_{0a}(t)
+ \sum_{c=\text{constraints}} \GForce_{c}(t)
\right)"/></p>
</div><p>In order to get the new generalized position, each joint is integrated
separately.</p>
<p>TODO: add support for kinematic controllers
TODO: repair this doctest
TODO: check the last test result!</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">simplearm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">joints</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getjoints</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">joints</span><span class="p">[</span><span class="s">&#39;Shoulder&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">gpos</span><span class="p">[:]</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">arboris.controllers</span> <span class="kn">import</span> <span class="n">ProportionalDerivativeController</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c0</span> <span class="o">=</span> <span class="n">ProportionalDerivativeController</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">],</span> <span class="mf">1.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">c0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">update_dynamic</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="mf">0.001</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">update_controllers</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">integrate</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">_gvel</span>
<span class="go">array([-0.00709132,  0.03355273, -0.09131555])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="arboris.core.World.iterbodies">
<tt class="descname">iterbodies</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.World.iterbodies" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all bodies, with a depth-first strategy.</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.World.iterconstraints">
<tt class="descname">iterconstraints</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.World.iterconstraints" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all constraints.</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.World.iterframes">
<tt class="descname">iterframes</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.World.iterframes" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all frames (bodies and subframes).</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.World.iterjoints">
<tt class="descname">iterjoints</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.World.iterjoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all joints, with a depth-first strategy.</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.World.itermovingsubframes">
<tt class="descname">itermovingsubframes</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.World.itermovingsubframes" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all subframes.</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.World.itershapes">
<tt class="descname">itershapes</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.World.itershapes" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all shapes.</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.World.itersubframes">
<tt class="descname">itersubframes</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.World.itersubframes" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all subframes.</p>
</dd></dl>

<dl class="attribute">
<dt id="arboris.core.World.mass">
<tt class="descname">mass</tt><a class="headerlink" href="#arboris.core.World.mass" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.core.World.name_all_elements">
<tt class="descname">name_all_elements</tt><big>(</big><em>check_unicity=False</em><big>)</big><a class="headerlink" href="#arboris.core.World.name_all_elements" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.World.ndof">
<tt class="descname">ndof</tt><a class="headerlink" href="#arboris.core.World.ndof" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.core.World.nleffects">
<tt class="descname">nleffects</tt><a class="headerlink" href="#arboris.core.World.nleffects" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.core.World.parse">
<tt class="descname">parse</tt><big>(</big><em>target</em><big>)</big><a class="headerlink" href="#arboris.core.World.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the world and call hooks on the <tt class="docutils literal"><span class="pre">target</span></tt> object.</p>
<p>This helper function  walks the world with a depth-first strategy and
call the <tt class="docutils literal"><span class="pre">register</span></tt> and <tt class="docutils literal"><span class="pre">add_link</span></tt> methods of the <tt class="docutils literal"><span class="pre">target</span></tt>
object. Each world element will be register only once. The order of the
successive registration is meant to ease conversion to hierachic
data structures such as collada or OSG ones.</p>
<p>TODO: add an example, such as the parse of the pantograph.</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.World.register">
<tt class="descname">register</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#arboris.core.World.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register an object into the world.</p>
<p><tt class="docutils literal"><span class="pre">obj</span></tt> can be a subframe, a shape or a constraint.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><dl class="first last docutils">
<dt>obj</dt>
<dd><p class="first last">the object that will be added. It may be a subframe, a shape,
a joint, a body or a controller.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">simplearm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">arboris.controllers</span> <span class="kn">import</span> <span class="n">ProportionalDerivativeController</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">joints</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getjoints</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c0</span> <span class="o">=</span> <span class="n">ProportionalDerivativeController</span><span class="p">(</span><span class="n">joints</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;my controller&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">c0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c1</span> <span class="o">=</span> <span class="n">ProportionalDerivativeController</span><span class="p">(</span><span class="n">joints</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="arboris.core.World.replace_joint">
<tt class="descname">replace_joint</tt><big>(</big><em>old_joint</em>, <em>*args</em><big>)</big><a class="headerlink" href="#arboris.core.World.replace_joint" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace a joint by another joint or by another kinematic chain.</p>
<p><strong>Syntax:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">world</span><span class="o">.</span><span class="n">replace_joint</span><span class="p">(</span><span class="n">old_joint</span><span class="p">,</span> <span class="n">new_joint</span><span class="p">)</span>
<span class="n">world</span><span class="o">.</span><span class="n">replace_joint</span><span class="p">(</span><span class="n">old_joint</span><span class="p">,</span> <span class="n">frame0</span><span class="p">,</span> <span class="n">new_joint</span><span class="p">,</span> <span class="o">...</span> <span class="p">,</span> <span class="n">frame1</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">simplearm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">arboris.joints</span> <span class="kn">import</span> <span class="n">RzJoint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">joints</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getjoints</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">replace_joint</span><span class="p">(</span><span class="n">joints</span><span class="p">[</span><span class="s">&#39;Elbow&#39;</span><span class="p">],</span> <span class="n">RzJoint</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="arboris.core.World.up">
<tt class="descname">up</tt><a class="headerlink" href="#arboris.core.World.up" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.core.World.update_constraints">
<tt class="descname">update_constraints</tt><big>(</big><em>dt</em>, <em>maxiters=1000</em>, <em>tol=0.0001</em><big>)</big><a class="headerlink" href="#arboris.core.World.update_constraints" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dt</strong> (<em>float</em>) &#8211; integration time</li>
<li><strong>maxiters</strong> (<em>int</em>) &#8211; maximum number of iteration to find the proper constraint forces</li>
<li><strong>tol</strong> (<em>float</em>) &#8211; convergence tolerance, corresponding to the norm(gvel_i - gvel_i-1)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>In accordance with the integration scheme, we assume the following
first order model between generalized velocities and generalized
forces:</p>
<div class="math">
<p><img src="_images/math/2919bf941d5895a033d869aeeb453fc5e1d1cac8.png" alt="\GVel(t+dt) &amp;= Y(t)
\left( \frac{M(t)}{dt} \GVel(t) + \GForce(t) \right)"/></p>
</div><p>where:</p>
<ul class="simple">
<li>the admittance matrix  <img class="math" src="_images/math/4f77f50452cb590d810313bacf612beec3e8daa9.png" alt="Y"/> takes into account a
first order model of the actuators,</li>
<li>the actuators generalized forces <img class="math" src="_images/math/f114726d6bc9c0667b495dcd5e4d3be0da38be0d.png" alt="\GForce(t)"/>
are assumed to be constant during the <img class="math" src="_images/math/dca874af37778dd884dda65a85f308933605926a.png" alt="[t , t+dt ]"/>
time interval.</li>
</ul>
<p>This (constraint-free) model must be completed by constraints
forces <img class="math" src="_images/math/12ba30c6ad0be9aea1e7a70ece4fad5db107b212.png" alt="\force[c]"/>, which are mapped to generalized forces
by the constraint jacobian <img class="math" src="_images/math/f6cf289461b57d580c6fe402889d44bdffe42ddd.png" alt="\J[c]_c\tp"/>:</p>
<div class="math">
<p><img src="_images/math/205b12c5dd6dad3727ead45bdcece0f94ecb22b1.png" alt="\GVel(t+dt)
&amp;= Y(t)
\left( \frac{M(t)}{dt} \GVel(t) + \GForce(t)
    + \sum_{c} \; \J[c]_{c}\tp(t) \; \force[c](t)
\right)"/></p>
</div><p>one can also define the constraint velocity  as:
<img class="math" src="_images/math/10fe0aaf393dcf19a0b652381a1e21fcc63b1a40.png" alt="\vel[c] = \J[c]_c \; \GVel"/> so that:</p>
<div class="math">
<p><img src="_images/math/9ac639d260daf5988be39728711b7f4e8b320048.png" alt="\vel[c](t+dt)
&amp;= \J[c]_c(t) \; \GVel(t+dt)\\
&amp;= \J[c]_c(t) \; Y(t)
\left(
    \frac{M(t)}{dt} \GVel(t) + \; \GForce(t)
\right)
+ \sum_d \; \J[c]_c(t) \; Y(t) \; \J[d]_d\tp(t)
\; \force[d](t)"/></p>
</div><p>one can define the (global) constraints velocity <img class="math" src="_images/math/214d260ef3d56720d6132a7797fce0a554cde3ad.png" alt="v'"/>,
force <img class="math" src="_images/math/28b7ff90a6bcc9b1bb80efca4223e76c96ada1f3.png" alt="f'"/>, jacobian matrix <img class="math" src="_images/math/de2c5211a5f40f9cbc67a979966ef0e4d1a06110.png" alt="J'"/>
and admittance matrix <img class="math" src="_images/math/6ac020b674f8e4585c4d7ebbe9efb3b7b760a52d.png" alt="Y'"/>:</p>
<div class="math">
<p><img src="_images/math/cd0c47b73384b905936935aaf4609f0bdeca2fd4.png" alt="v'(t) =
\begin{bmatrix}
    \vel[0](t)\\ \vdots \\ \vel[c](t) \\ \vdots
\end{bmatrix}
\hspace{50px}
f'(t) =
\begin{bmatrix}
    \force[0](t)\\ \vdots \\ \force[c](t) \\ \vdots
\end{bmatrix}
\hspace{50px}
J'(t) =
\begin{bmatrix}
    \J[0]_0(t)\\
    \vdots\\
    \J[c]_c(t)\\
    \vdots
\end{bmatrix}
\hspace{50px}
Y'(t) =
J'(t) \; Y(t) \; J'(t)\tp"/></p>
</div><p>and get a synthetic expression:</p>
<div class="math">
<p><img src="_images/math/bff3266da35f2c937ab0bef258efe9fc874d826f.png" alt="v'(t+dt) &amp;= J'(t) \; Y(t)
\left( \frac{M(t)}{dt}  \GVel(t) + \GForce(t) \right)
+ Y'(t) \; f'"/></p>
</div><p>This method computes the constraint forces in three steps:</p>
<ul class="simple">
<li>ask each active constraint object for its jacobian,</li>
<li>compute <img class="math" src="_images/math/2d656e6ee7a0597efde9cd70b1497619730ff85d.png" alt="J"/>, <img class="math" src="_images/math/d5337b5d40c4a379cf8df8f0e3be0a4d1fa7ef1d.png" alt="v"/>  and <img class="math" src="_images/math/4f77f50452cb590d810313bacf612beec3e8daa9.png" alt="Y"/>,</li>
<li>iterate over each constraint object in order to compute
<img class="math" src="_images/math/12ba30c6ad0be9aea1e7a70ece4fad5db107b212.png" alt="\force[c]"/>. At each iteration the force is
updated by <img class="math" src="_images/math/efcc6524ca0c22ffd1082771a0b309252364f22f.png" alt="\Delta\force[c]"/></li>
<li>eventually add each active constraint generalized force to
world <tt class="xref py py-attr docutils literal"><span class="pre">_gforce</span></tt> property.</li>
</ul>
<p>TODO: add an example.</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.World.update_controllers">
<tt class="descname">update_controllers</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#arboris.core.World.update_controllers" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dt</strong> (<em>float</em>) &#8211; integration time</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">simplearm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">arboris.controllers</span> <span class="kn">import</span> <span class="n">ProportionalDerivativeController</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">joints</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getjoints</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a0</span> <span class="o">=</span> <span class="n">ProportionalDerivativeController</span><span class="p">(</span><span class="n">joints</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">],</span> <span class="mf">2.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">a0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">update_dynamic</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">update_controllers</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">_impedance</span>
<span class="go">array([[ 686.98833333,  223.44666667,   20.67333333],</span>
<span class="go">       [ 223.44666667,   93.44866667,   10.67333333],</span>
<span class="go">       [  20.67333333,   10.67333333,    2.67333333]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">_admittance</span>
<span class="go">array([[ 0.00732382, -0.0203006 ,  0.0244142 ],</span>
<span class="go">       [-0.0203006 ,  0.07594182, -0.14621124],</span>
<span class="go">       [ 0.0244142 , -0.14621124,  0.76901683]])</span>
</pre></div>
</div>
<p><strong>Algorithm:</strong></p>
<p>Let&#8217;s consider the following discretized 2nd-order model:</p>
<div class="math">
<p><img src="_images/math/15c27986e4cb3137ff770632e9d7764586b3acee.png" alt="M(t) \dGVel(t+dt) + \left( N(t)+B(t) )\right) \GVel(t+dt) &amp;=
\GForce(t)"/></p>
</div><p>considering</p>
<div class="math">
<p><img src="_images/math/2cb6db75060c58e70ff21314f2592e7e1a985ada.png" alt="\dGVel(t+dt) = \frac{\GVel(t+dt) - \GVel(t)}{dt}"/></p>
</div><p>we get</p>
<div class="math">
<p><img src="_images/math/58ed52bab158f02d9999643d75e887afa58a4557.png" alt="\left( \frac{M(t)}{dt}+N(t)+B(t) \right) \GVel(t+dt) &amp;=
\frac{M(t)}{dt} \GVel(t) + \GForce(t)"/></p>
</div><p>Here <img class="math" src="_images/math/f114726d6bc9c0667b495dcd5e4d3be0da38be0d.png" alt="\GForce(t)"/> sums up the generalized forces due to
all the active controllers and constraints.</p>
<p>The generalized force due to a controller has the following form:</p>
<div class="math">
<p><img src="_images/math/c7e3a367980bfb4aba630998e3210d6f5c600525.png" alt="\GForce_a(t) &amp;= \GForce_{0a}(t) + Z_a(t) \GVel(t+td)"/></p>
</div><p>where <img class="math" src="_images/math/1337aeaa7f54e82917bebc9d8764a81dd728581a.png" alt="\GForce_{0a}(t)"/> is constant during the
<img class="math" src="_images/math/73e7e47b5c0e107c5442018660601bf17ebb8d72.png" alt="[t, t+dt]"/> period of time.</p>
<p>It leads us to</p>
<div class="math">
<p><img src="_images/math/e6ad48276a5072ee6a68d27b4adc469054e0b6a8.png" alt="\left( \frac{M(t)}{dt}+N(t)+B(t) -\sum_a Z_a(t) \right)
\GVel(t+dt) &amp;=
\frac{M(t)}{dt} \GVel(t) + \sum_a \GForce_{0a}(t)"/></p>
</div><p>One can the define impedance (<img class="math" src="_images/math/c639b659e89adfb57e54ad527fe595c1f1dba349.png" alt="Z"/>) and admittance (<img class="math" src="_images/math/4f77f50452cb590d810313bacf612beec3e8daa9.png" alt="Y"/>)
matrices:</p>
<div class="math">
<p><img src="_images/math/0dcff428f65a840a35769fdc1e6759f9500f4774.png" alt="Z(t) &amp;= \frac{M(t)}{dt}+N(t)+B(t)-\sum_a Z_a(t) \\
Y(t) &amp;= Z^{-1}(t)"/></p>
</div><p>TODO: check the two last tests results!</p>
</dd></dl>

<dl class="method">
<dt id="arboris.core.World.update_dynamic">
<tt class="descname">update_dynamic</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.World.update_dynamic" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the forward geometric, kinematic and dynamic models.</p>
<p>Recursively update each body pose, jacobian, djacobian, twist
and nleffects attributes (thanks to the
<a class="reference internal" href="#arboris.core.Body.update_dynamic" title="arboris.core.Body.update_dynamic"><tt class="xref py py-meth docutils literal"><span class="pre">arboris.core.Body.update_dynamic()</span></tt></a> method) and then update
the world mass, viscosity and nleffects attributes.</p>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">simplearm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">update_dynamic</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Algorithm:</strong></p>
<p>The (world) generalized mass, viscosity and nleffect matrices
respectively denoted <img class="math" src="_images/math/de9779baa3bc51337ec7faa734ef1d70ec23767e.png" alt="M"/>, <img class="math" src="_images/math/86fd6bffe531e0c8a227b753ab804bdd9af8b329.png" alt="B"/> and <img class="math" src="_images/math/cf5191c791a7e5961ca555d5b77c55db0f219110.png" alt="N"/> are computed from each body
<img class="math" src="_images/math/d5a28a80cbbc63e6935bff634aef049fab9dfbaf.png" alt="b"/> jacobian <img class="math" src="_images/math/27223ff7bed8ecdb8e92f99ef4467542c6ae9768.png" alt="\J[b]_{b/g}"/>, hessian <img class="math" src="_images/math/aadba67599a0d7cfbe2d036c8bb84c329b331077.png" alt="\dJ[b]_{b/g}"/>, mass <img class="math" src="_images/math/c62c758d3e98f929019dc209c6644893c7df16ac.png" alt="M_b"/>,
viscosity <img class="math" src="_images/math/716d37854e0783804159cfb45798f4ee4b76f2e4.png" alt="B_b"/> and nleffects <img class="math" src="_images/math/1730f1e617b1301c4d0d0a949405bf254490d377.png" alt="N_b"/> matrices as :</p>
<div class="math">
<p><img src="_images/math/e382306a6b2d88847d77b1ba661e7ebb976bd855.png" alt="M &amp;= \sum_b \J[b]_{b/g}\tp \; M_b \; \J[b]_{b/g} \\
B &amp;= \sum_b \J[b]_{b/g}\tp \; B_b \; \J[b]_{b/g} \\
N &amp;= \sum_b \J[b]_{b/g}\tp
\left( M_b \; \dJ[b]_{b/g} + N_b \; \J[b]_{b/g}\right)"/></p>
</div><p>If there is no additional constraint (such as contacts) nor actuation
involved, the resulting (free) model is then:</p>
<div class="math">
<p><img src="_images/math/f710c7ba5d89a4a5fe7b5001711c2c168409a21d.png" alt="M \dGVel + \left( N + B \right) \GVel = 0"/></p>
</div></dd></dl>

<dl class="method">
<dt id="arboris.core.World.update_geometric">
<tt class="descname">update_geometric</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.World.update_geometric" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the forward geometric model.</p>
<p>This will recursively update each body pose attribute.</p>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">simplearm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">update_geometric</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="arboris.core.World.viscosity">
<tt class="descname">viscosity</tt><a class="headerlink" href="#arboris.core.World.viscosity" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="arboris.core.name_all_elements">
<tt class="descclassname">arboris.core.</tt><tt class="descname">name_all_elements</tt><big>(</big><em>nlist</em>, <em>check_unicity=False</em><big>)</big><a class="headerlink" href="#arboris.core.name_all_elements" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="arboris.core.simplearm">
<tt class="descclassname">arboris.core.</tt><tt class="descname">simplearm</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.core.simplearm" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="arboris.core.simulate">
<tt class="descclassname">arboris.core.</tt><tt class="descname">simulate</tt><big>(</big><em>world</em>, <em>timeline</em>, <em>observers=()</em><big>)</big><a class="headerlink" href="#arboris.core.simulate" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a full simulation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>world</strong> (<a class="reference internal" href="#arboris.core.World" title="arboris.core.World"><tt class="xref py py-class docutils literal"><span class="pre">World</span></tt></a>) &#8211; the world to be simulated</li>
<li><strong>time</strong> (<em>iterable</em>) &#8211; a list of distinct times</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">simplearm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="mf">0.001</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.01</span><span class="p">,</span><span class="mf">0.001</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">simulate</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">time</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-arboris.joints">
<span id="joints-concrete-joint-implementations"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">joints</span></tt> - Concrete joint implementations<a class="headerlink" href="#module-arboris.joints" title="Permalink to this headline">¶</a></h2>
<p>Different kinds of joints</p>
<dl class="class">
<dt id="arboris.joints.FixedJoint">
<em class="property">class </em><tt class="descclassname">arboris.joints.</tt><tt class="descname">FixedJoint</tt><big>(</big><em>name=None</em><big>)</big><a class="headerlink" href="#arboris.joints.FixedJoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Fixed joint (0-dof).</p>
<p>A fixed joint where all dof are constrained.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<em>string</em>) &#8211; the joint name</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">j</span> <span class="o">=</span> <span class="n">FreeJoint</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">j</span><span class="o">.</span><span class="n">gpos</span>
<span class="go">[]</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="arboris.joints.FixedJoint.djacobian">
<tt class="descname">djacobian</tt><a class="headerlink" href="#arboris.joints.FixedJoint.djacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.joints.FixedJoint.integrate">
<tt class="descname">integrate</tt><big>(</big><em>gvel</em>, <em>dt</em><big>)</big><a class="headerlink" href="#arboris.joints.FixedJoint.integrate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.FixedJoint.jacobian">
<tt class="descname">jacobian</tt><a class="headerlink" href="#arboris.joints.FixedJoint.jacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.FixedJoint.ndof">
<tt class="descname">ndof</tt><a class="headerlink" href="#arboris.joints.FixedJoint.ndof" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.FixedJoint.pose">
<tt class="descname">pose</tt><a class="headerlink" href="#arboris.joints.FixedJoint.pose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.FixedJoint.twist">
<tt class="descname">twist</tt><a class="headerlink" href="#arboris.joints.FixedJoint.twist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.joints.FreeJoint">
<em class="property">class </em><tt class="descclassname">arboris.joints.</tt><tt class="descname">FreeJoint</tt><big>(</big><em>gpos=None</em>, <em>gvel=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.joints.FreeJoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Free joint (6-dof).</p>
<p>A free joint, with no dof constrained.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>gpos</strong> (<em>(4,4)-array</em>) &#8211; initial generalized joint position, a homogeneous matrix</li>
<li><strong>gvel</strong> (<em>(6,)-array</em>) &#8211; initial generalized joint velocity, a twist</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the joint name</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">j</span> <span class="o">=</span> <span class="n">FreeJoint</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span><span class="o">.</span><span class="n">gpos</span>
<span class="go">array([[ 1.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  1.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span><span class="o">.</span><span class="n">gvel</span>
<span class="go">array([ 0.,  0.,  0.,  0.,  0.,  0.])</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="arboris.joints.FreeJoint.djacobian">
<tt class="descname">djacobian</tt><a class="headerlink" href="#arboris.joints.FreeJoint.djacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.joints.FreeJoint.integrate">
<tt class="descname">integrate</tt><big>(</big><em>gvel</em>, <em>dt</em><big>)</big><a class="headerlink" href="#arboris.joints.FreeJoint.integrate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.FreeJoint.jacobian">
<tt class="descname">jacobian</tt><a class="headerlink" href="#arboris.joints.FreeJoint.jacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.FreeJoint.ndof">
<tt class="descname">ndof</tt><a class="headerlink" href="#arboris.joints.FreeJoint.ndof" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.FreeJoint.pose">
<tt class="descname">pose</tt><a class="headerlink" href="#arboris.joints.FreeJoint.pose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.FreeJoint.twist">
<tt class="descname">twist</tt><a class="headerlink" href="#arboris.joints.FreeJoint.twist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.joints.RxJoint">
<em class="property">class </em><tt class="descclassname">arboris.joints.</tt><tt class="descname">RxJoint</tt><big>(</big><em>gpos=None</em>, <em>gvel=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.joints.RxJoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Hinge (1-dof) with axis in the x-direction.</p>
<dl class="attribute">
<dt id="arboris.joints.RxJoint.djacobian">
<tt class="descname">djacobian</tt><a class="headerlink" href="#arboris.joints.RxJoint.djacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RxJoint.ipose">
<tt class="descname">ipose</tt><a class="headerlink" href="#arboris.joints.RxJoint.ipose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RxJoint.jacobian">
<tt class="descname">jacobian</tt><a class="headerlink" href="#arboris.joints.RxJoint.jacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RxJoint.ndof">
<tt class="descname">ndof</tt><a class="headerlink" href="#arboris.joints.RxJoint.ndof" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RxJoint.pose">
<tt class="descname">pose</tt><a class="headerlink" href="#arboris.joints.RxJoint.pose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.joints.RyJoint">
<em class="property">class </em><tt class="descclassname">arboris.joints.</tt><tt class="descname">RyJoint</tt><big>(</big><em>gpos=None</em>, <em>gvel=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.joints.RyJoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Hinge (1-dof) with axis in the y-direction.</p>
<dl class="attribute">
<dt id="arboris.joints.RyJoint.djacobian">
<tt class="descname">djacobian</tt><a class="headerlink" href="#arboris.joints.RyJoint.djacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RyJoint.ipose">
<tt class="descname">ipose</tt><a class="headerlink" href="#arboris.joints.RyJoint.ipose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RyJoint.jacobian">
<tt class="descname">jacobian</tt><a class="headerlink" href="#arboris.joints.RyJoint.jacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RyJoint.ndof">
<tt class="descname">ndof</tt><a class="headerlink" href="#arboris.joints.RyJoint.ndof" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RyJoint.pose">
<tt class="descname">pose</tt><a class="headerlink" href="#arboris.joints.RyJoint.pose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.joints.RyRxJoint">
<em class="property">class </em><tt class="descclassname">arboris.joints.</tt><tt class="descname">RyRxJoint</tt><big>(</big><em>gpos=None</em>, <em>gvel=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.joints.RyRxJoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Fingered Ball (2-dof) implemented with 2 serial hinges.</p>
<p>The resulting homogeneous matrix is given by <img class="math" src="_images/math/bc5d7e11a9fcc1767347783242685cede78d5081.png" alt="\H = \R_z \R_y"/>.</p>
<dl class="attribute">
<dt id="arboris.joints.RyRxJoint.djacobian">
<tt class="descname">djacobian</tt><a class="headerlink" href="#arboris.joints.RyRxJoint.djacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RyRxJoint.jacobian">
<tt class="descname">jacobian</tt><a class="headerlink" href="#arboris.joints.RyRxJoint.jacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RyRxJoint.ndof">
<tt class="descname">ndof</tt><a class="headerlink" href="#arboris.joints.RyRxJoint.ndof" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RyRxJoint.pose">
<tt class="descname">pose</tt><a class="headerlink" href="#arboris.joints.RyRxJoint.pose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.joints.RzJoint">
<em class="property">class </em><tt class="descclassname">arboris.joints.</tt><tt class="descname">RzJoint</tt><big>(</big><em>gpos=None</em>, <em>gvel=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.joints.RzJoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Hinge (1-dof) with axis in the z-direction.</p>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">j</span> <span class="o">=</span> <span class="n">RzJoint</span><span class="p">(</span><span class="n">gpos</span> <span class="o">=</span> <span class="mf">3.14</span><span class="o">/</span><span class="mf">2.</span><span class="p">,</span> <span class="n">gvel</span> <span class="o">=</span> <span class="mf">1.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span><span class="o">.</span><span class="n">gpos</span>
<span class="go">array([ 1.57])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span><span class="o">.</span><span class="n">gvel</span>
<span class="go">array([ 1.])</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="arboris.joints.RzJoint.djacobian">
<tt class="descname">djacobian</tt><a class="headerlink" href="#arboris.joints.RzJoint.djacobian" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">j</span> <span class="o">=</span> <span class="n">RzJoint</span><span class="p">(</span><span class="n">gpos</span> <span class="o">=</span> <span class="mf">3.14</span><span class="o">/</span><span class="mf">2.</span><span class="p">,</span> <span class="n">gvel</span> <span class="o">=</span> <span class="mf">1.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span><span class="o">.</span><span class="n">djacobian</span>
<span class="go">array([[ 0.],</span>
<span class="go">       [ 0.],</span>
<span class="go">       [ 0.],</span>
<span class="go">       [ 0.],</span>
<span class="go">       [ 0.],</span>
<span class="go">       [ 0.]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RzJoint.ipose">
<tt class="descname">ipose</tt><a class="headerlink" href="#arboris.joints.RzJoint.ipose" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">j</span> <span class="o">=</span> <span class="n">RzJoint</span><span class="p">(</span><span class="n">gpos</span> <span class="o">=</span> <span class="mf">3.14</span><span class="o">/</span><span class="mf">2.</span><span class="p">,</span> <span class="n">gvel</span> <span class="o">=</span> <span class="mf">1.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span><span class="o">.</span><span class="n">ipose</span>
<span class="go">array([[  7.96326711e-04,   9.99999683e-01,   0.00000000e+00,</span>
<span class="go">          0.00000000e+00],</span>
<span class="go">       [ -9.99999683e-01,   7.96326711e-04,   0.00000000e+00,</span>
<span class="go">          0.00000000e+00],</span>
<span class="go">       [  0.00000000e+00,   0.00000000e+00,   1.00000000e+00,</span>
<span class="go">          0.00000000e+00],</span>
<span class="go">       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,</span>
<span class="go">          1.00000000e+00]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RzJoint.jacobian">
<tt class="descname">jacobian</tt><a class="headerlink" href="#arboris.joints.RzJoint.jacobian" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">j</span> <span class="o">=</span> <span class="n">RzJoint</span><span class="p">(</span><span class="n">gpos</span> <span class="o">=</span> <span class="mf">3.14</span><span class="o">/</span><span class="mf">2.</span><span class="p">,</span> <span class="n">gvel</span> <span class="o">=</span> <span class="mf">1.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span><span class="o">.</span><span class="n">jacobian</span>
<span class="go">array([[ 0.],</span>
<span class="go">       [ 0.],</span>
<span class="go">       [ 1.],</span>
<span class="go">       [ 0.],</span>
<span class="go">       [ 0.],</span>
<span class="go">       [ 0.]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RzJoint.ndof">
<tt class="descname">ndof</tt><a class="headerlink" href="#arboris.joints.RzJoint.ndof" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RzJoint.pose">
<tt class="descname">pose</tt><a class="headerlink" href="#arboris.joints.RzJoint.pose" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">j</span> <span class="o">=</span> <span class="n">RzJoint</span><span class="p">(</span><span class="n">gpos</span> <span class="o">=</span> <span class="mf">3.14</span><span class="o">/</span><span class="mf">2.</span><span class="p">,</span> <span class="n">gvel</span> <span class="o">=</span> <span class="mf">1.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span><span class="o">.</span><span class="n">pose</span>
<span class="go">array([[  7.96326711e-04,  -9.99999683e-01,   0.00000000e+00,</span>
<span class="go">          0.00000000e+00],</span>
<span class="go">       [  9.99999683e-01,   7.96326711e-04,   0.00000000e+00,</span>
<span class="go">          0.00000000e+00],</span>
<span class="go">       [  0.00000000e+00,   0.00000000e+00,   1.00000000e+00,</span>
<span class="go">          0.00000000e+00],</span>
<span class="go">       [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00,</span>
<span class="go">          1.00000000e+00]])</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.joints.RzRxJoint">
<em class="property">class </em><tt class="descclassname">arboris.joints.</tt><tt class="descname">RzRxJoint</tt><big>(</big><em>gpos=None</em>, <em>gvel=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.joints.RzRxJoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Fingered Ball (2-dof) implemented with 2 serial hinges.</p>
<p>The resulting homogeneous matrix is given by <img class="math" src="_images/math/b152a3a7294a293e42829ab6a27c95faaa36cbc2.png" alt="\H = \R_z \R_x"/>.</p>
<dl class="attribute">
<dt id="arboris.joints.RzRxJoint.djacobian">
<tt class="descname">djacobian</tt><a class="headerlink" href="#arboris.joints.RzRxJoint.djacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RzRxJoint.jacobian">
<tt class="descname">jacobian</tt><a class="headerlink" href="#arboris.joints.RzRxJoint.jacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RzRxJoint.ndof">
<tt class="descname">ndof</tt><a class="headerlink" href="#arboris.joints.RzRxJoint.ndof" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RzRxJoint.pose">
<tt class="descname">pose</tt><a class="headerlink" href="#arboris.joints.RzRxJoint.pose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.joints.RzRyJoint">
<em class="property">class </em><tt class="descclassname">arboris.joints.</tt><tt class="descname">RzRyJoint</tt><big>(</big><em>gpos=None</em>, <em>gvel=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.joints.RzRyJoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Fingered Ball (2-dof) implemented with 2 serial hinges.</p>
<p>The resulting homogeneous matrix is given by <img class="math" src="_images/math/bc5d7e11a9fcc1767347783242685cede78d5081.png" alt="\H = \R_z \R_y"/>.</p>
<dl class="attribute">
<dt id="arboris.joints.RzRyJoint.djacobian">
<tt class="descname">djacobian</tt><a class="headerlink" href="#arboris.joints.RzRyJoint.djacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RzRyJoint.jacobian">
<tt class="descname">jacobian</tt><a class="headerlink" href="#arboris.joints.RzRyJoint.jacobian" title="Permalink to this definition">¶</a></dt>
<dd><p>T_n/r =</p>
</dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RzRyJoint.ndof">
<tt class="descname">ndof</tt><a class="headerlink" href="#arboris.joints.RzRyJoint.ndof" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RzRyJoint.pose">
<tt class="descname">pose</tt><a class="headerlink" href="#arboris.joints.RzRyJoint.pose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.joints.RzRyRxJoint">
<em class="property">class </em><tt class="descclassname">arboris.joints.</tt><tt class="descname">RzRyRxJoint</tt><big>(</big><em>gpos=None</em>, <em>gvel=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.joints.RzRyRxJoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Ball and socket (3-dof) joint implemented with 3 serial hinges.</p>
<p>The resulting homogeneous matrix is given by <img class="math" src="_images/math/c5aa5ce02e9fbe7386b921bdbef9757e917e9b92.png" alt="H_{01} = \R_z \R_y \R_x"/>.</p>
<dl class="attribute">
<dt id="arboris.joints.RzRyRxJoint.djacobian">
<tt class="descname">djacobian</tt><a class="headerlink" href="#arboris.joints.RzRyRxJoint.djacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RzRyRxJoint.jacobian">
<tt class="descname">jacobian</tt><a class="headerlink" href="#arboris.joints.RzRyRxJoint.jacobian" title="Permalink to this definition">¶</a></dt>
<dd><p>T_n/r =</p>
</dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RzRyRxJoint.ndof">
<tt class="descname">ndof</tt><a class="headerlink" href="#arboris.joints.RzRyRxJoint.ndof" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.RzRyRxJoint.pose">
<tt class="descname">pose</tt><a class="headerlink" href="#arboris.joints.RzRyRxJoint.pose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.joints.TxJoint">
<em class="property">class </em><tt class="descclassname">arboris.joints.</tt><tt class="descname">TxJoint</tt><big>(</big><em>gpos=None</em>, <em>gvel=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.joints.TxJoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Prismatic (1-dof) with axis in the x-direction.</p>
<dl class="attribute">
<dt id="arboris.joints.TxJoint.djacobian">
<tt class="descname">djacobian</tt><a class="headerlink" href="#arboris.joints.TxJoint.djacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.TxJoint.ipose">
<tt class="descname">ipose</tt><a class="headerlink" href="#arboris.joints.TxJoint.ipose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.TxJoint.jacobian">
<tt class="descname">jacobian</tt><a class="headerlink" href="#arboris.joints.TxJoint.jacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.TxJoint.ndof">
<tt class="descname">ndof</tt><a class="headerlink" href="#arboris.joints.TxJoint.ndof" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.TxJoint.pose">
<tt class="descname">pose</tt><a class="headerlink" href="#arboris.joints.TxJoint.pose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.joints.TxTyTzJoint">
<em class="property">class </em><tt class="descclassname">arboris.joints.</tt><tt class="descname">TxTyTzJoint</tt><big>(</big><em>gpos=None</em>, <em>gvel=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.joints.TxTyTzJoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Triple prismatic joint (3-dof).</p>
<p>The resulting homogeneous matrix is given by <img class="math" src="_images/math/241845748813943205c2560cbda7db115765411c.png" alt="\H = T_x T_y T_z"/>.</p>
<dl class="attribute">
<dt id="arboris.joints.TxTyTzJoint.djacobian">
<tt class="descname">djacobian</tt><a class="headerlink" href="#arboris.joints.TxTyTzJoint.djacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.TxTyTzJoint.jacobian">
<tt class="descname">jacobian</tt><a class="headerlink" href="#arboris.joints.TxTyTzJoint.jacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.TxTyTzJoint.ndof">
<tt class="descname">ndof</tt><a class="headerlink" href="#arboris.joints.TxTyTzJoint.ndof" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.TxTyTzJoint.pose">
<tt class="descname">pose</tt><a class="headerlink" href="#arboris.joints.TxTyTzJoint.pose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.joints.TyJoint">
<em class="property">class </em><tt class="descclassname">arboris.joints.</tt><tt class="descname">TyJoint</tt><big>(</big><em>gpos=None</em>, <em>gvel=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.joints.TyJoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Prismatic (1-dof) with axis in the y-direction.</p>
<dl class="attribute">
<dt id="arboris.joints.TyJoint.djacobian">
<tt class="descname">djacobian</tt><a class="headerlink" href="#arboris.joints.TyJoint.djacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.TyJoint.ipose">
<tt class="descname">ipose</tt><a class="headerlink" href="#arboris.joints.TyJoint.ipose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.TyJoint.jacobian">
<tt class="descname">jacobian</tt><a class="headerlink" href="#arboris.joints.TyJoint.jacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.TyJoint.ndof">
<tt class="descname">ndof</tt><a class="headerlink" href="#arboris.joints.TyJoint.ndof" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.TyJoint.pose">
<tt class="descname">pose</tt><a class="headerlink" href="#arboris.joints.TyJoint.pose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.joints.TzJoint">
<em class="property">class </em><tt class="descclassname">arboris.joints.</tt><tt class="descname">TzJoint</tt><big>(</big><em>gpos=None</em>, <em>gvel=None</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.joints.TzJoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Prismatic (1-dof) with axis in the z-direction.</p>
<dl class="attribute">
<dt id="arboris.joints.TzJoint.djacobian">
<tt class="descname">djacobian</tt><a class="headerlink" href="#arboris.joints.TzJoint.djacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.TzJoint.ipose">
<tt class="descname">ipose</tt><a class="headerlink" href="#arboris.joints.TzJoint.ipose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.TzJoint.jacobian">
<tt class="descname">jacobian</tt><a class="headerlink" href="#arboris.joints.TzJoint.jacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.TzJoint.ndof">
<tt class="descname">ndof</tt><a class="headerlink" href="#arboris.joints.TzJoint.ndof" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="arboris.joints.TzJoint.pose">
<tt class="descname">pose</tt><a class="headerlink" href="#arboris.joints.TzJoint.pose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-arboris.observers">
<span id="observers-get-world-information"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">observers</span></tt> - Get world information<a class="headerlink" href="#module-arboris.observers" title="Permalink to this headline">¶</a></h2>
<p>A set of Observers.</p>
<dl class="class">
<dt id="arboris.observers.CoMObserver">
<em class="property">class </em><tt class="descclassname">arboris.observers.</tt><tt class="descname">CoMObserver</tt><big>(</big><em>bodies</em>, <em>compute_Jacobians=True</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.observers.CoMObserver" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Center of Mass (CoM) position and jacobian of a group of bodies.</p>
<p>This observer can also be used in another observer to record CoM data,
or in a controller to control the CoM motion.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>bodies</strong> (list of <a class="reference internal" href="#arboris.core.Body" title="arboris.core.Body"><tt class="xref py py-class docutils literal"><span class="pre">Body</span></tt></a>) &#8211; the bodies on which the CoM is computed</li>
<li><strong>compute_Jacobians</strong> (<em>bool</em>) &#8211; whether CoM jacobian and its derivative has to be computed</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the instance name of the observer</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="arboris.observers.CoMObserver.finish">
<tt class="descname">finish</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.observers.CoMObserver.finish" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.observers.CoMObserver.get_CoMJacobian">
<tt class="descname">get_CoMJacobian</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.observers.CoMObserver.get_CoMJacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.observers.CoMObserver.get_CoMPosition">
<tt class="descname">get_CoMPosition</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.observers.CoMObserver.get_CoMPosition" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.observers.CoMObserver.get_CoMdJacobian">
<tt class="descname">get_CoMdJacobian</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.observers.CoMObserver.get_CoMdJacobian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.observers.CoMObserver.init">
<tt class="descname">init</tt><big>(</big><em>world</em>, <em>timeline=None</em><big>)</big><a class="headerlink" href="#arboris.observers.CoMObserver.init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.observers.CoMObserver.update">
<tt class="descname">update</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#arboris.observers.CoMObserver.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.observers.EnergyMonitor">
<em class="property">class </em><tt class="descclassname">arboris.observers.</tt><tt class="descname">EnergyMonitor</tt><big>(</big><em>name=None</em><big>)</big><a class="headerlink" href="#arboris.observers.EnergyMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute and store the world energy at each time step.</p>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">arboris.core</span> <span class="kn">import</span> <span class="n">World</span><span class="p">,</span> <span class="n">simulate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">arboris.robots.simplearm</span> <span class="kn">import</span> <span class="n">add_simplearm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">World</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">observers</span> <span class="o">=</span> <span class="p">[</span><span class="n">EnergyMonitor</span><span class="p">()]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_simplearm</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">simulate</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">observers</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c">#obs.plot()</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<em>string</em>) &#8211; the instance name of the observer</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="arboris.observers.EnergyMonitor.finish">
<tt class="descname">finish</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.observers.EnergyMonitor.finish" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.observers.EnergyMonitor.init">
<tt class="descname">init</tt><big>(</big><em>world</em>, <em>timeline</em><big>)</big><a class="headerlink" href="#arboris.observers.EnergyMonitor.init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.observers.EnergyMonitor.plot">
<tt class="descname">plot</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.observers.EnergyMonitor.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the energy evolution.</p>
</dd></dl>

<dl class="method">
<dt id="arboris.observers.EnergyMonitor.update">
<tt class="descname">update</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#arboris.observers.EnergyMonitor.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.observers.Hdf5Logger">
<em class="property">class </em><tt class="descclassname">arboris.observers.</tt><tt class="descname">Hdf5Logger</tt><big>(</big><em>filename</em>, <em>group='/'</em>, <em>mode='a'</em>, <em>save_transforms=True</em>, <em>save_state=False</em>, <em>save_model=False</em>, <em>flat=False</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.observers.Hdf5Logger" title="Permalink to this definition">¶</a></dt>
<dd><p>A concrete class to save simulation data in hdf5 file.</p>
<p>See <a class="reference internal" href="#arboris.observers.SaveLogger" title="arboris.observers.SaveLogger"><tt class="xref py py-class docutils literal"><span class="pre">SaveLogger</span></tt></a> to have more info on saved data.</p>
<p>All the simulation data lies in a single user-chosen group, that is denoted
<tt class="docutils literal"><span class="pre">root</span></tt> in the following, and which defaults to <tt class="docutils literal"><span class="pre">/</span></tt>.</p>
<p>The hdf5 file has the following layout:</p>
<div class="highlight-python"><div class="highlight"><pre>root/timeline (nsteps,)
root/gpositions/
root/gvelocities/
root/model/
root/transforms/
</pre></div>
</div>
<p>Here, <tt class="docutils literal"><span class="pre">gpositions,</span> <span class="pre">gvelocities,</span> <span class="pre">model,</span> <span class="pre">transforms</span></tt> represent hdf5 groups.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> (<em>string</em>) &#8211; the name of the hdf5 file where to write the data</li>
<li><strong>group</strong> (<em>string</em>) &#8211; the group name inside the hdf5 file where to write data</li>
<li><strong>mode</strong> (<em>string</em>) &#8211; mode to open the hdf5 file</li>
<li><strong>save_transforms</strong> (<em>bool</em>) &#8211; toggle the write of the <tt class="docutils literal"><span class="pre">transforms</span></tt> group</li>
<li><strong>save_state</strong> (<em>bool</em>) &#8211; toggle the write of the <tt class="docutils literal"><span class="pre">gpos</span></tt> and <tt class="docutils literal"><span class="pre">gvel</span></tt> groups</li>
<li><strong>save_model</strong> (<em>bool</em>) &#8211; toggle the write of <tt class="docutils literal"><span class="pre">model</span></tt> group</li>
<li><strong>flat</strong> (<em>bool</em>) &#8211; whether to save body of joint poses in the <tt class="docutils literal"><span class="pre">transforms</span></tt> group</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the instance name of the observer</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="arboris.observers.Hdf5Logger.finish">
<tt class="descname">finish</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.observers.Hdf5Logger.finish" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.observers.PerfMonitor">
<em class="property">class </em><tt class="descclassname">arboris.observers.</tt><tt class="descname">PerfMonitor</tt><big>(</big><em>log=False</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.observers.PerfMonitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Get current world time during simulation, and overall simulation performances.</p>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">arboris.core</span> <span class="kn">import</span> <span class="n">World</span><span class="p">,</span> <span class="n">simulate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">arboris.robots.simplearm</span> <span class="kn">import</span> <span class="n">add_simplearm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">World</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obs</span> <span class="o">=</span> <span class="n">PerfMonitor</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_simplearm</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">simulate</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="n">obs</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">obs</span><span class="o">.</span><span class="n">get_summary</span><span class="p">()</span> 
<span class="go">total computation time (s): ...</span>
<span class="go">min computation time (s): ...</span>
<span class="go">mean computation time (s): ...</span>
<span class="go">max computation time (s): ...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c">#obs.plot()</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>log</strong> (<em>bool</em>) &#8211; whether to show current time of simulation</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the instance name of the observer</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="arboris.observers.PerfMonitor.finish">
<tt class="descname">finish</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.observers.PerfMonitor.finish" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.observers.PerfMonitor.get_summary">
<tt class="descname">get_summary</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.observers.PerfMonitor.get_summary" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.observers.PerfMonitor.init">
<tt class="descname">init</tt><big>(</big><em>world</em>, <em>timeline</em><big>)</big><a class="headerlink" href="#arboris.observers.PerfMonitor.init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.observers.PerfMonitor.plot">
<tt class="descname">plot</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.observers.PerfMonitor.plot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.observers.PerfMonitor.update">
<tt class="descname">update</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#arboris.observers.PerfMonitor.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.observers.PickleLogger">
<em class="property">class </em><tt class="descclassname">arboris.observers.</tt><tt class="descname">PickleLogger</tt><big>(</big><em>filename</em>, <em>mode='wb'</em>, <em>save_transforms=True</em>, <em>save_state=False</em>, <em>save_model=False</em>, <em>flat=False</em>, <em>protocol=0</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.observers.PickleLogger" title="Permalink to this definition">¶</a></dt>
<dd><p>A concrete class to save simulation data in pickle file.</p>
<p>See <a class="reference internal" href="#arboris.observers.SaveLogger" title="arboris.observers.SaveLogger"><tt class="xref py py-class docutils literal"><span class="pre">SaveLogger</span></tt></a> to have more info on saved data.</p>
<p>Here, <tt class="docutils literal"><span class="pre">gpositions,</span> <span class="pre">gvelocities,</span> <span class="pre">model,</span> <span class="pre">transforms</span></tt> are saved as dictionnaries
in pickle file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> (<em>string</em>) &#8211; the name of the pickle file where to write the data</li>
<li><strong>mode</strong> (<em>string</em>) &#8211; mode to open the pickle file</li>
<li><strong>save_transforms</strong> (<em>bool</em>) &#8211; toggle the write of the <tt class="docutils literal"><span class="pre">transforms</span></tt> group</li>
<li><strong>save_state</strong> (<em>bool</em>) &#8211; toggle the write of the <tt class="docutils literal"><span class="pre">gpos</span></tt> and <tt class="docutils literal"><span class="pre">gvel</span></tt> groups</li>
<li><strong>save_model</strong> (<em>bool</em>) &#8211; toggle the write of <tt class="docutils literal"><span class="pre">model</span></tt> group</li>
<li><strong>flat</strong> (<em>bool</em>) &#8211; whether to save body of joint poses in the <tt class="docutils literal"><span class="pre">transforms</span></tt> group</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the instance name of the observer</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="arboris.observers.PickleLogger.finish">
<tt class="descname">finish</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.observers.PickleLogger.finish" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.observers.RecordCoMPosition">
<em class="property">class </em><tt class="descclassname">arboris.observers.</tt><tt class="descname">RecordCoMPosition</tt><big>(</big><em>bodies</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.observers.RecordCoMPosition" title="Permalink to this definition">¶</a></dt>
<dd><p>Record the CoM position of a group of bodies.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>bodies</strong> (list of <a class="reference internal" href="#arboris.core.Body" title="arboris.core.Body"><tt class="xref py py-class docutils literal"><span class="pre">Body</span></tt></a>) &#8211; the bodies on which the CoM is computed</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the instance name of the observer</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="arboris.observers.RecordCoMPosition.init">
<tt class="descname">init</tt><big>(</big><em>world</em>, <em>timeline</em><big>)</big><a class="headerlink" href="#arboris.observers.RecordCoMPosition.init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.observers.RecordCoMPosition.update">
<tt class="descname">update</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#arboris.observers.RecordCoMPosition.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.observers.RecordConstForce">
<em class="property">class </em><tt class="descclassname">arboris.observers.</tt><tt class="descname">RecordConstForce</tt><big>(</big><em>const</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.observers.RecordConstForce" title="Permalink to this definition">¶</a></dt>
<dd><p>Record the generalized force of a constraint.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>joint</strong> (<a class="reference internal" href="#arboris.core.Constraint" title="arboris.core.Constraint"><tt class="xref py py-class docutils literal"><span class="pre">Constraint</span></tt></a>) &#8211; the constraint to track</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the instance name of the observer</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="arboris.observers.RecordConstForce.update">
<tt class="descname">update</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#arboris.observers.RecordConstForce.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.observers.RecordDistance">
<em class="property">class </em><tt class="descclassname">arboris.observers.</tt><tt class="descname">RecordDistance</tt><big>(</big><em>sh1</em>, <em>sh2</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.observers.RecordDistance" title="Permalink to this definition">¶</a></dt>
<dd><p>Record the distance between two shapes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sh1</strong> (<a class="reference internal" href="#arboris.core.Shape" title="arboris.core.Shape"><tt class="xref py py-class docutils literal"><span class="pre">Shape</span></tt></a>) &#8211; the first shape to compute the distance</li>
<li><strong>sh2</strong> (<a class="reference internal" href="#arboris.core.Shape" title="arboris.core.Shape"><tt class="xref py py-class docutils literal"><span class="pre">Shape</span></tt></a>) &#8211; the first shape to compute the distance</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the instance name of the observer</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Warning:</strong></p>
<p>This recorder works only if a distance solver for these two shapes
is returned by <a class="reference internal" href="collisions.html#arboris.collisions.choose_solver" title="arboris.collisions.choose_solver"><tt class="xref py py-meth docutils literal"><span class="pre">choose_solver()</span></tt></a>.</p>
<dl class="method">
<dt id="arboris.observers.RecordDistance.update">
<tt class="descname">update</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#arboris.observers.RecordDistance.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.observers.RecordFramePose">
<em class="property">class </em><tt class="descclassname">arboris.observers.</tt><tt class="descname">RecordFramePose</tt><big>(</big><em>frame</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.observers.RecordFramePose" title="Permalink to this definition">¶</a></dt>
<dd><p>Record the pose of a frame (<img class="math" src="_images/math/86170b4e080bd04dd408fe255c73c13fdfed6caf.png" alt="f"/>) relative to the ground (<img class="math" src="_images/math/8359c7a441a40d56b1598d67a0390aa3394e6bc4.png" alt="g"/>) <img class="math" src="_images/math/17cfb30f9949b0034f46aeb5920ea18a1d71aac1.png" alt="\H_{gf}"/>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>joint</strong> (<a class="reference internal" href="#arboris.core.Frame" title="arboris.core.Frame"><tt class="xref py py-class docutils literal"><span class="pre">Frame</span></tt></a>) &#8211; the frame to track</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the instance name of the observer</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="arboris.observers.RecordFramePose.update">
<tt class="descname">update</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#arboris.observers.RecordFramePose.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.observers.RecordFrameTwist">
<em class="property">class </em><tt class="descclassname">arboris.observers.</tt><tt class="descname">RecordFrameTwist</tt><big>(</big><em>frame</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.observers.RecordFrameTwist" title="Permalink to this definition">¶</a></dt>
<dd><p>Record the twist of a frame (<img class="math" src="_images/math/86170b4e080bd04dd408fe255c73c13fdfed6caf.png" alt="f"/>) relative to the ground (<img class="math" src="_images/math/8359c7a441a40d56b1598d67a0390aa3394e6bc4.png" alt="g"/>) expressed in frame <img class="math" src="_images/math/d245ae465474546412284c577b26a637bf417597.png" alt="\twist{f}_{f/g}"/>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>joint</strong> (<a class="reference internal" href="#arboris.core.Frame" title="arboris.core.Frame"><tt class="xref py py-class docutils literal"><span class="pre">Frame</span></tt></a>) &#8211; the frame to track</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the instance name of the observer</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="arboris.observers.RecordFrameTwist.update">
<tt class="descname">update</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#arboris.observers.RecordFrameTwist.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.observers.RecordJointGpos">
<em class="property">class </em><tt class="descclassname">arboris.observers.</tt><tt class="descname">RecordJointGpos</tt><big>(</big><em>joint</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.observers.RecordJointGpos" title="Permalink to this definition">¶</a></dt>
<dd><p>Record the generalized pose of a joint.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>joint</strong> (<a class="reference internal" href="#arboris.core.Joint" title="arboris.core.Joint"><tt class="xref py py-class docutils literal"><span class="pre">Joint</span></tt></a>) &#8211; the joint to track</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the instance name of the observer</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="arboris.observers.RecordJointGpos.update">
<tt class="descname">update</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#arboris.observers.RecordJointGpos.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.observers.RecordJointGvel">
<em class="property">class </em><tt class="descclassname">arboris.observers.</tt><tt class="descname">RecordJointGvel</tt><big>(</big><em>joint</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.observers.RecordJointGvel" title="Permalink to this definition">¶</a></dt>
<dd><p>Record the generalized velocity of a joint.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>joint</strong> (<a class="reference internal" href="#arboris.core.Joint" title="arboris.core.Joint"><tt class="xref py py-class docutils literal"><span class="pre">Joint</span></tt></a>) &#8211; the joint to track</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the instance name of the observer</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="arboris.observers.RecordJointGvel.update">
<tt class="descname">update</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#arboris.observers.RecordJointGvel.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.observers.SaveLogger">
<em class="property">class </em><tt class="descclassname">arboris.observers.</tt><tt class="descname">SaveLogger</tt><big>(</big><em>save_transforms=True</em>, <em>save_state=False</em>, <em>save_model=False</em>, <em>flat=False</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.observers.SaveLogger" title="Permalink to this definition">¶</a></dt>
<dd><p>An abstract observer that saves the simulation data.</p>
<p>All the data are in S.I. units (radians, meters, newtons and seconds).</p>
<p>The possible recorded data for each time step are:</p>
<div class="highlight-python"><div class="highlight"><pre>timeline (nsteps,)
gpositions/
gvelocities/
model/
transforms/
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">gvelocities</span></tt> contains the generalized velocities of the
joints:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">NameOfJoint0</span> <span class="p">(</span><span class="n">nsteps</span><span class="p">,</span> <span class="n">joint0</span><span class="o">.</span><span class="n">ndof</span><span class="p">)</span>
<span class="n">NameOfJoint1</span> <span class="p">(</span><span class="n">nsteps</span><span class="p">,</span> <span class="n">joint1</span><span class="o">.</span><span class="n">ndof</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
<p>while the <tt class="docutils literal"><span class="pre">gpositions</span></tt> contains their generalized positions.</p>
<p>The <tt class="docutils literal"><span class="pre">model</span></tt> contains the matrices from the dynamical model:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">gvel</span> <span class="p">(</span><span class="n">nsteps</span><span class="p">,</span> <span class="n">ndof</span><span class="p">)</span>
<span class="n">gforce</span> <span class="p">(</span><span class="n">nsteps</span><span class="p">,</span> <span class="n">ndof</span><span class="p">)</span>
<span class="n">mass</span> <span class="p">(</span><span class="n">nsteps</span><span class="p">,</span> <span class="n">ndof</span><span class="p">,</span> <span class="n">ndof</span><span class="p">)</span>
<span class="n">nleffects</span> <span class="p">(</span><span class="n">nsteps</span><span class="p">,</span> <span class="n">ndof</span><span class="p">,</span> <span class="n">ndof</span><span class="p">)</span>
<span class="n">admittance</span> <span class="p">(</span><span class="n">nsteps</span><span class="p">,</span> <span class="n">ndof</span><span class="p">,</span> <span class="n">ndof</span><span class="p">)</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">transforms</span></tt> contains homogeneous transformations,
useful for viewing an animation of the simulation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">NameOfTransform0</span> <span class="p">(</span><span class="n">nsteps</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">NameOfTransform1</span> <span class="p">(</span><span class="n">nsteps</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
<p>The name and value of the transforms depends on the <tt class="docutils literal"><span class="pre">flat</span></tt> parameter.
If <tt class="docutils literal"><span class="pre">flat</span></tt> is True, then there is one transform per body, named after the
body and whose value is the body absolute pose (<tt class="docutils literal"><span class="pre">Body.pose</span></tt>).
If <tt class="docutils literal"><span class="pre">flat</span></tt> is False, there is one transform per joint, whose value is
<tt class="docutils literal"><span class="pre">Joint.pose</span></tt> and whose name is taken from the joint second frame
(<tt class="docutils literal"><span class="pre">Joint.frames[1].name</span></tt>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>save_transforms</strong> (<em>bool</em>) &#8211; toggle the write of the <tt class="docutils literal"><span class="pre">transforms</span></tt> group</li>
<li><strong>save_state</strong> (<em>bool</em>) &#8211; toggle the write of the <tt class="docutils literal"><span class="pre">gpos</span></tt> and <tt class="docutils literal"><span class="pre">gvel</span></tt> groups</li>
<li><strong>save_model</strong> (<em>bool</em>) &#8211; toggle the write of <tt class="docutils literal"><span class="pre">model</span></tt> group</li>
<li><strong>flat</strong> (<em>bool</em>) &#8211; whether to save body of joint poses in the <tt class="docutils literal"><span class="pre">transforms</span></tt> group</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the instance name of the observer</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="arboris.observers.SaveLogger.init">
<tt class="descname">init</tt><big>(</big><em>world</em>, <em>timeline</em><big>)</big><a class="headerlink" href="#arboris.observers.SaveLogger.init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.observers.SaveLogger.update">
<tt class="descname">update</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#arboris.observers.SaveLogger.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the current data (state...).</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="arboris.observers.SocketCom">
<em class="property">class </em><tt class="descclassname">arboris.observers.</tt><tt class="descname">SocketCom</tt><big>(</big><em>host='127.0.0.1'</em>, <em>port=5000</em>, <em>timeout=3</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.observers.SocketCom" title="Permalink to this definition">¶</a></dt>
<dd><p>An abstract observer that can communicate with another application through sockets.</p>
<p>Children class must defined the <tt class="docutils literal"><span class="pre">update</span></tt> method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> (<em>string</em>) &#8211; the remote host address</li>
<li><strong>port</strong> (<em>int</em>) &#8211; the remote connection port</li>
<li><strong>timeout</strong> (<em>float</em>) &#8211; time before raising error if not connection found</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the instance name of the observer</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="arboris.observers.SocketCom.finish">
<tt class="descname">finish</tt><big>(</big><big>)</big><a class="headerlink" href="#arboris.observers.SocketCom.finish" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="arboris.observers.SocketCom.init">
<tt class="descname">init</tt><big>(</big><em>world</em>, <em>timeline</em><big>)</big><a class="headerlink" href="#arboris.observers.SocketCom.init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-arboris.shapes">
<span id="shapes-for-collision-display"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">shapes</span></tt> - For collision &amp; display<a class="headerlink" href="#module-arboris.shapes" title="Permalink to this headline">¶</a></h2>
<p>Geometric shapes, for use in collision detection.</p>
<dl class="class">
<dt id="arboris.shapes.Box">
<em class="property">class </em><tt class="descclassname">arboris.shapes.</tt><tt class="descname">Box</tt><big>(</big><em>frame</em>, <em>half_extents=(1.0</em>, <em>1.0</em>, <em>1.0)</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.shapes.Box" title="Permalink to this definition">¶</a></dt>
<dd><p>A box.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>frame</strong> (<a class="reference internal" href="#arboris.core.Frame" title="arboris.core.Frame"><tt class="xref py py-class docutils literal"><span class="pre">Frame</span></tt></a>) &#8211; the frame the shape is attached to</li>
<li><strong>half_extents</strong> (<em>(3,)-array</em>) &#8211; the half dimension of the box along x, y, z</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the shape&#8217;s name</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="arboris.shapes.Cylinder">
<em class="property">class </em><tt class="descclassname">arboris.shapes.</tt><tt class="descname">Cylinder</tt><big>(</big><em>frame</em>, <em>length=1.0</em>, <em>radius=1.0</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.shapes.Cylinder" title="Permalink to this definition">¶</a></dt>
<dd><p>A cylinder, whose symmetry axis is along the z-axis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>frame</strong> (<a class="reference internal" href="#arboris.core.Frame" title="arboris.core.Frame"><tt class="xref py py-class docutils literal"><span class="pre">Frame</span></tt></a>) &#8211; the frame the shape is attached to</li>
<li><strong>length</strong> (<em>float</em>) &#8211; the cylinder length along z-axis</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the shape&#8217;s name</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="arboris.shapes.Plane">
<em class="property">class </em><tt class="descclassname">arboris.shapes.</tt><tt class="descname">Plane</tt><big>(</big><em>frame</em>, <em>coeffs=(0.0</em>, <em>1.0</em>, <em>0.0</em>, <em>0.0)</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.shapes.Plane" title="Permalink to this definition">¶</a></dt>
<dd><p>A plane.</p>
<p>A plane defined by the equation <img class="math" src="_images/math/48e0c4bf92d2b7768cf6be72a1a5a7c54da980b6.png" alt="a x + b y + c z + d = 0"/>, in the <tt class="docutils literal"><span class="pre">frame</span></tt>
coordinates.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>frame</strong> (<a class="reference internal" href="#arboris.core.Frame" title="arboris.core.Frame"><tt class="xref py py-class docutils literal"><span class="pre">Frame</span></tt></a>) &#8211; the frame the shape is attached to</li>
<li><strong>coeffs</strong> (<em>(4,)-array</em>) &#8211; coefficients <img class="math" src="_images/math/491427b30b729081dcd105b35e59b78c06097b9b.png" alt="(a, b, c, d)"/> for the plane equation</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the shape&#8217;s name</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="arboris.shapes.Point">
<em class="property">class </em><tt class="descclassname">arboris.shapes.</tt><tt class="descname">Point</tt><big>(</big><em>frame</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.shapes.Point" title="Permalink to this definition">¶</a></dt>
<dd><p>A point.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>frame</strong> (<a class="reference internal" href="#arboris.core.Frame" title="arboris.core.Frame"><tt class="xref py py-class docutils literal"><span class="pre">Frame</span></tt></a>) &#8211; the frame the shape is attached to</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the shape&#8217;s name</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="arboris.shapes.Sphere">
<em class="property">class </em><tt class="descclassname">arboris.shapes.</tt><tt class="descname">Sphere</tt><big>(</big><em>frame</em>, <em>radius=1.0</em>, <em>name=None</em><big>)</big><a class="headerlink" href="#arboris.shapes.Sphere" title="Permalink to this definition">¶</a></dt>
<dd><p>A sphere.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>frame</strong> (<a class="reference internal" href="#arboris.core.Frame" title="arboris.core.Frame"><tt class="xref py py-class docutils literal"><span class="pre">Frame</span></tt></a>) &#8211; the frame the shape is attached to</li>
<li><strong>name</strong> (<em>string</em>) &#8211; the shape&#8217;s name</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-arboris.robots.human36">
<span id="human36"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">human36</span></tt><a class="headerlink" href="#module-arboris.robots.human36" title="Permalink to this headline">¶</a></h2>
<p>This module serve as a factory for anthropometric humanoid models.</p>
<p>The model is based on the <tt class="docutils literal"><span class="pre">human36</span></tt> anatomical model from the <a class="reference external" href="http://bipop.inrialpes.fr/software/humans/">HuMAnS
toolbox</a> software, developed at the INRIA in Grenoble.</p>
<p>To the end-user, only the <a class="reference internal" href="#arboris.robots.human36.add_human36" title="arboris.robots.human36.add_human36"><tt class="xref py py-func docutils literal"><span class="pre">add_human36()</span></tt></a> function should be useful.</p>
<p><strong>Finding the anatomical parameters in the HuMAnS toolbox source code</strong></p>
<p>HuMAnS (at version 1.0.7) uses Maple-generated C-code for computing
the lagrangian model matrices and performs the integration and contact
resolution in scilab. More precisely, some maple code in the
<tt class="docutils literal"><span class="pre">HuMAnS/LagrangianModel/Model/Human36/MapleCodeGeneration</span></tt>  directory
describes</p>
<ul class="simple">
<li>the lagrangian dynamics,</li>
<li>the contact kinematics,</li>
<li>and the &#8220;tags&#8221; kinematics (in the HuMAnS vocable, Tags are
feature points such as the anatomical landmarks used for human
motion reconstruction, as defined as &#8220;Sites&#8221; in H-anim).</li>
</ul>
<p>These files generate the C files that are then called from scilab. The functions
take as parameters the human state (generalized positions and velocities) and
anatomical parameters which are divided in</p>
<ul class="simple">
<li>parameters needed for kinematic model (the <tt class="docutils literal"><span class="pre">L</span></tt> variable in
<tt class="docutils literal"><span class="pre">HuMAnS/LagrangianModel/Human36/MapleCodeGeneration/kinematicData.maple</span></tt>),</li>
<li>parmeters needed for motion reconstruction and contacts (the <tt class="docutils literal"><span class="pre">AddL</span></tt>
variable in
<tt class="docutils literal"><span class="pre">HuMAnS/LagrangianModel/Human36/MapleCodeGeneration/AdditionnalData.maple</span></tt>).</li>
</ul>
<p>The two arrays of parameters are computed from the human&#8217;s total height in the
function <tt class="docutils literal"><span class="pre">SetModelSize</span></tt> from the file
<tt class="docutils literal"><span class="pre">HuMAnS/LagrangianModel/Human36/human36.c</span></tt>.</p>
<p>The data about mass geomerty are located in
<tt class="docutils literal"><span class="pre">HuMAnS/LagrangianModel/Model/Human36/MapleCodeGeneration/DynamicData.maple</span></tt>.</p>
<p>Warning: the HuMAnS doc about inertia computation was erroneous (the real math
is in the <tt class="docutils literal"><span class="pre">IOMatrix</span></tt> proc in <tt class="docutils literal"><span class="pre">DynamicData.maple</span></tt>).</p>
<blockquote>
<div>Human Motion Analysis and Simulation toolbox</div></blockquote>
<dl class="function">
<dt id="arboris.robots.human36.add_human36">
<tt class="descclassname">arboris.robots.human36.</tt><tt class="descname">add_human36</tt><big>(</big><em>world</em>, <em>height=1.741</em>, <em>mass=73</em>, <em>anat_lengths=None</em>, <em>prefix=''</em><big>)</big><a class="headerlink" href="#arboris.robots.human36.add_human36" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an anthropometric humanoid model to the world.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>height</strong> (<em>float</em>) &#8211; the human height in meters. Ignored if <tt class="docutils literal"><span class="pre">anat_lengths</span></tt>
is provided.</li>
<li><strong>mass</strong> (<em>float</em>) &#8211; the human mass in kilograms.</li>
<li><strong>anat_lengths</strong> (<em>dict</em>) &#8211; the human anatomical lengths.
Computed from <tt class="docutils literal"><span class="pre">height</span></tt> if not provided</li>
<li><strong>prefix</strong> (<em>string</em>) &#8211; name of the human, used to prefix every object name.</li>
<li><strong>return_lists</strong> &#8211; if True, returns of a tuple of the added objects</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Examples</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">World</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># add a normal human</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_human36</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mf">1.8</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&quot;Bob&#39;s &quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># add a human with a shorter left arm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">L</span> <span class="o">=</span> <span class="n">anat_lengths_from_height</span><span class="p">(</span><span class="mf">1.8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">L</span><span class="p">[</span><span class="s">&#39;yhumerusL&#39;</span><span class="p">]</span> <span class="o">*=</span> <span class="o">.</span><span class="mi">7</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">L</span><span class="p">[</span><span class="s">&#39;yforearmL&#39;</span><span class="p">]</span> <span class="o">*=</span> <span class="o">.</span><span class="mi">7</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">L</span><span class="p">[</span><span class="s">&#39;yhandL&#39;</span><span class="p">]</span> <span class="o">*=</span> <span class="o">.</span><span class="mi">7</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_human36</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">anat_lengths</span><span class="o">=</span><span class="n">L</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&quot;Casimodo&#39;s &quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frames</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getframes</span><span class="p">()</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frames</span><span class="p">[</span><span class="s">&quot;Bob&#39;s Left stylion&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">bpose</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frames</span><span class="p">[</span><span class="s">&quot;Bob&#39;s Left stylion&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pose</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frames</span><span class="p">[</span><span class="s">&quot;Casimodo&#39;s Left stylion&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">bpose</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arboris.robots.human36.anat_lengths_from_height">
<tt class="descclassname">arboris.robots.human36.</tt><tt class="descname">anat_lengths_from_height</tt><big>(</big><em>height</em><big>)</big><a class="headerlink" href="#arboris.robots.human36.anat_lengths_from_height" title="Permalink to this definition">¶</a></dt>
<dd><p>Dict-like object storing anatomical lengths as defined in HuMAnS.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>height</strong> (<em>float</em>) &#8211; the human height</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">anatomical lengths, scaled according to <tt class="docutils literal"><span class="pre">height</span></tt></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict</td>
</tr>
</tbody>
</table>
<p><strong>Examples:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">L</span> <span class="o">=</span> <span class="n">anat_lengths_from_height</span><span class="p">(</span><span class="mf">1.741</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">L</span><span class="p">[</span><span class="s">&#39;ysternoclavL&#39;</span><span class="p">]</span>
<span class="go">0.17061800000000002</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">L</span> <span class="o">=</span> <span class="n">anat_lengths_from_height</span><span class="p">(</span><span class="mf">2.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">L</span><span class="p">[</span><span class="s">&#39;ysternoclavL&#39;</span><span class="p">])</span>
<span class="go">0.196</span>
</pre></div>
</div>
<p><strong>Differences with HuMAnS:</strong></p>
<p>The data comes from the file <tt class="docutils literal"><span class="pre">LagrangianModel/Human36/Human36.c</span></tt>
in HuMAnS.
The lengths defined in this class correspond to the <tt class="docutils literal"><span class="pre">L</span></tt> variable in
<tt class="docutils literal"><span class="pre">HuMAnS/LagrangianModel/Human36/MapleCodeGeneration/kinematicData.maple</span></tt>,
with the addition of <tt class="docutils literal"><span class="pre">xheelR</span></tt> and <tt class="docutils literal"><span class="pre">xheelL</span></tt> lenghts are not defined
in <tt class="docutils literal"><span class="pre">anatomicalLengths</span></tt> but in <tt class="docutils literal"><span class="pre">tagMultSize</span></tt></p>
<p><strong>Differences with matlab-arboris:</strong></p>
<p>In this implementation, the &#8220;zshoulder&#8221;, &#8220;zhip&#8221; and &#8220;xfoot&#8221; lengths are
computed as in HuMAnS, which is different from the way they were
computed in matlab-arboris.</p>
</dd></dl>

<dl class="function">
<dt id="arboris.robots.human36.height_from_anat_lengths">
<tt class="descclassname">arboris.robots.human36.</tt><tt class="descname">height_from_anat_lengths</tt><big>(</big><em>lengths</em><big>)</big><a class="headerlink" href="#arboris.robots.human36.height_from_anat_lengths" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes a human height according to its anatomical lengths.</p>
<p>An exception is thrown if the human is asymmetric (one leg longer than the
other...).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return height:</th><td class="field-body">the human height</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">float</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">ValueError if one leg is longer than the other</td>
</tr>
</tbody>
</table>
<p><strong>Examples:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">L</span> <span class="o">=</span> <span class="n">anat_lengths_from_height</span><span class="p">(</span><span class="mf">1.741</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">height_from_anat_lengths</span><span class="p">(</span><span class="n">L</span><span class="p">))</span>
<span class="go">1.741</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">L</span><span class="p">[</span><span class="s">&#39;ytibiaL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">.</span><span class="mi">95</span> <span class="o">*</span> <span class="n">L</span><span class="p">[</span><span class="s">&#39;ytibiaL&#39;</span><span class="p">]</span> <span class="c"># shorten the left leg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">height_from_anat_lengths</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ValueError</span>: <span class="n">The legs have different lengths</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-arboris.homogeneousmatrix">
<span id="homogeneousmatrix"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">homogeneousmatrix</span></tt><a class="headerlink" href="#module-arboris.homogeneousmatrix" title="Permalink to this headline">¶</a></h2>
<p>Functions for working with homogeneous matrices.</p>
<dl class="function">
<dt id="arboris.homogeneousmatrix.adjoint">
<tt class="descclassname">arboris.homogeneousmatrix.</tt><tt class="descname">adjoint</tt><big>(</big><em>H</em><big>)</big><a class="headerlink" href="#arboris.homogeneousmatrix.adjoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Adjoint of the homogeneous matrix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>H</strong> (<em>(4,4)-array</em>) &#8211; homogeneous matrix</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">adjoint matrix</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">(6,6)-array</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">H</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[[</span> <span class="mf">0.70738827</span><span class="p">,</span>  <span class="mf">0.</span>        <span class="p">,</span> <span class="o">-</span><span class="mf">0.70682518</span><span class="p">,</span>  <span class="mf">3.</span>        <span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span> <span class="mf">0.61194086</span><span class="p">,</span>  <span class="mf">0.50045969</span><span class="p">,</span>  <span class="mf">0.61242835</span><span class="p">,</span>  <span class="mf">4.</span>        <span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span> <span class="mf">0.35373751</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.86575984</span><span class="p">,</span>  <span class="mf">0.35401931</span><span class="p">,</span>  <span class="mf">5.</span>        <span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span> <span class="mf">0.</span>        <span class="p">,</span>  <span class="mf">0.</span>        <span class="p">,</span>  <span class="mf">0.</span>        <span class="p">,</span>  <span class="mf">1.</span>        <span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adjoint</span><span class="p">(</span><span class="n">H</span><span class="p">)</span>
<span class="go">array([[ 0.70738827,  0.        , -0.70682518,  0.        ,  0.        ,</span>
<span class="go">         0.        ],</span>
<span class="go">       [ 0.61194086,  0.50045969,  0.61242835,  0.        ,  0.        ,</span>
<span class="go">         0.        ],</span>
<span class="go">       [ 0.35373751, -0.86575984,  0.35401931,  0.        ,  0.        ,</span>
<span class="go">         0.        ],</span>
<span class="go">       [-1.64475426, -5.96533781, -1.64606451,  0.70738827,  0.        ,</span>
<span class="go">        -0.70682518],</span>
<span class="go">       [ 2.47572882,  2.59727952, -4.59618383,  0.61194086,  0.50045969,</span>
<span class="go">         0.61242835],</span>
<span class="go">       [-0.9937305 ,  1.50137907,  4.66458577,  0.35373751, -0.86575984,</span>
<span class="go">         0.35401931]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arboris.homogeneousmatrix.dAdjoint">
<tt class="descclassname">arboris.homogeneousmatrix.</tt><tt class="descname">dAdjoint</tt><big>(</big><em>Ad</em>, <em>T</em><big>)</big><a class="headerlink" href="#arboris.homogeneousmatrix.dAdjoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the derivative of an Adjoint with respect to time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>Ad</strong> (<em>(6,6)-array</em>) &#8211; the Adjoint matrix one wants the derivative.</li>
<li><strong>T</strong> (<em>(6,)-array</em>) &#8211; the corresponding twist</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the derivative of the adjoint matrix</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(6,6)-array</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Definition from arboris-matlab:</strong></p>
<p>if H is defined as follow:</p>
<div class="math">
<p><img src="_images/math/d104970f5ddd8d9354d81d183b3ee2c4f11a906a.png" alt="x{a} = H * x{b}
Ad = adjoint( H )
T  = velocity of {b} relative to {a} expressed in {b}"/></p>
</div></dd></dl>

<dl class="function">
<dt id="arboris.homogeneousmatrix.iadjoint">
<tt class="descclassname">arboris.homogeneousmatrix.</tt><tt class="descname">iadjoint</tt><big>(</big><em>H</em><big>)</big><a class="headerlink" href="#arboris.homogeneousmatrix.iadjoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the adjoint ((6,6) array) of the inverse homogeneous matrix.</p>
</dd></dl>

<dl class="function">
<dt id="arboris.homogeneousmatrix.inv">
<tt class="descclassname">arboris.homogeneousmatrix.</tt><tt class="descname">inv</tt><big>(</big><em>H</em><big>)</big><a class="headerlink" href="#arboris.homogeneousmatrix.inv" title="Permalink to this definition">¶</a></dt>
<dd><p>Invert a homogeneous matrix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>H</strong> (<em>(4,4)-array</em>) &#8211; the homogeneous matrix to invert</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">inverted homogeneous matrix</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">(4,4)-array</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">H</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[[</span> <span class="mf">0.70738827</span><span class="p">,</span>  <span class="mf">0.</span>        <span class="p">,</span> <span class="o">-</span><span class="mf">0.70682518</span><span class="p">,</span>  <span class="mf">3.</span>        <span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span> <span class="mf">0.61194086</span><span class="p">,</span>  <span class="mf">0.50045969</span><span class="p">,</span>  <span class="mf">0.61242835</span><span class="p">,</span>  <span class="mf">4.</span>        <span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span> <span class="mf">0.35373751</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.86575984</span><span class="p">,</span>  <span class="mf">0.35401931</span><span class="p">,</span>  <span class="mf">5.</span>        <span class="p">],</span>
<span class="gp">... </span>     <span class="p">[</span> <span class="mf">0.</span>        <span class="p">,</span>  <span class="mf">0.</span>        <span class="p">,</span>  <span class="mf">0.</span>        <span class="p">,</span>  <span class="mf">1.</span>        <span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inv</span><span class="p">(</span><span class="n">H</span><span class="p">)</span>
<span class="go">array([[ 0.70738827,  0.61194086,  0.35373751, -6.3386158 ],</span>
<span class="go">       [ 0.        ,  0.50045969, -0.86575984,  2.32696044],</span>
<span class="go">       [-0.70682518,  0.61242835,  0.35401931, -2.09933441],</span>
<span class="go">       [ 0.        ,  0.        ,  0.        ,  1.        ]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arboris.homogeneousmatrix.ishomogeneousmatrix">
<tt class="descclassname">arboris.homogeneousmatrix.</tt><tt class="descname">ishomogeneousmatrix</tt><big>(</big><em>H</em>, <em>_tol=1e-09</em><big>)</big><a class="headerlink" href="#arboris.homogeneousmatrix.ishomogeneousmatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Return true if input is an homogeneous matrix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>H</strong> (<em>(4,4)-array</em>) &#8211; the homogeneous matrix to check</li>
<li><strong>_tol</strong> (<em>float</em>) &#8211; the tolerance for the rotation matrix determinant</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">True if homogeneous matrix, False otherwise</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arboris.homogeneousmatrix.pdot">
<tt class="descclassname">arboris.homogeneousmatrix.</tt><tt class="descname">pdot</tt><big>(</big><em>H</em>, <em>point</em><big>)</big><a class="headerlink" href="#arboris.homogeneousmatrix.pdot" title="Permalink to this definition">¶</a></dt>
<dd><p>Frame displacement for a point.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>H</strong> (<em>(4,4)-array</em>) &#8211; the homogeneous matrix to check</li>
<li><strong>point</strong> (<em>(3,)-array</em>) &#8211; point one wants to displace</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the displaced point</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(3,)-array</p>
</td>
</tr>
</tbody>
</table>
<p><img class="math" src="_images/math/bdd2087f765e68963f5af971ff587df3006a0c1a.png" alt="\pt{a} = \H_{ab}  \pt{b}"/>, where <img class="math" src="_images/math/d29c9a92228428c743fe08cee6acd8b47711f400.png" alt="\H_{ab}"/> is the
homogeneous matrix from <img class="math" src="_images/math/849d6eee6481724f60866d69462cb36e05149ad7.png" alt="\Frame{a}"/> to <img class="math" src="_images/math/485e3ea953ae8036f46dc97f3e26def2dec9801b.png" alt="\Frame{b}"/>, and <img class="math" src="_images/math/a795a343019a1f6c51afef958c0121726ae68406.png" alt="\pt{b}"/> is
the point expressed in <img class="math" src="_images/math/485e3ea953ae8036f46dc97f3e26def2dec9801b.png" alt="\Frame{b}"/>.</p>
</dd></dl>

<dl class="function">
<dt id="arboris.homogeneousmatrix.rotx">
<tt class="descclassname">arboris.homogeneousmatrix.</tt><tt class="descname">rotx</tt><big>(</big><em>angle</em><big>)</big><a class="headerlink" href="#arboris.homogeneousmatrix.rotx" title="Permalink to this definition">¶</a></dt>
<dd><p>Homogeneous matrix of a rotation around the x-axis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>angle</strong> (<em>float</em>) &#8211; angle around x-axis in radian</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">homogeneous matrix</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">(4,4)-array</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rotx</span><span class="p">(</span><span class="mf">3.14</span><span class="o">/</span><span class="mi">6</span><span class="p">)</span>
<span class="go">array([[ 1.        ,  0.        ,  0.        ,  0.        ],</span>
<span class="go">       [ 0.        ,  0.86615809, -0.4997701 ,  0.        ],</span>
<span class="go">       [ 0.        ,  0.4997701 ,  0.86615809,  0.        ],</span>
<span class="go">       [ 0.        ,  0.        ,  0.        ,  1.        ]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arboris.homogeneousmatrix.roty">
<tt class="descclassname">arboris.homogeneousmatrix.</tt><tt class="descname">roty</tt><big>(</big><em>angle</em><big>)</big><a class="headerlink" href="#arboris.homogeneousmatrix.roty" title="Permalink to this definition">¶</a></dt>
<dd><p>Homogeneous matrix of a rotation around the y-axis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>angle</strong> (<em>float</em>) &#8211; angle around y-axis in radian</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">homogeneous matrix</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">(4,4)-array</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">roty</span><span class="p">(</span><span class="mf">3.14</span><span class="o">/</span><span class="mi">6</span><span class="p">)</span>
<span class="go">array([[ 0.86615809,  0.        ,  0.4997701 ,  0.        ],</span>
<span class="go">       [ 0.        ,  1.        ,  0.        ,  0.        ],</span>
<span class="go">       [-0.4997701 ,  0.        ,  0.86615809,  0.        ],</span>
<span class="go">       [ 0.        ,  0.        ,  0.        ,  1.        ]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arboris.homogeneousmatrix.rotyx">
<tt class="descclassname">arboris.homogeneousmatrix.</tt><tt class="descname">rotyx</tt><big>(</big><em>angle_y</em>, <em>angle_x</em><big>)</big><a class="headerlink" href="#arboris.homogeneousmatrix.rotyx" title="Permalink to this definition">¶</a></dt>
<dd><p>Homogeneous transformation matrix from roll-pitch angles.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>angle_y</strong> (<em>float</em>) &#8211; pitch angle in radian</li>
<li><strong>angle_x</strong> (<em>float</em>) &#8211; roll angle in radian</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">homogeneous matrix of the roll-pitch orientation</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(4,4)-array</p>
</td>
</tr>
</tbody>
</table>
<p>In short, return: R = R_{y} * R_{x}</p>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rotyx</span><span class="p">(</span><span class="mf">3.14</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span> <span class="mf">3.14</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
<span class="go">array([[ 0.70738827,  0.61194086,  0.35373751,  0.        ],</span>
<span class="go">       [ 0.        ,  0.50045969, -0.86575984,  0.        ],</span>
<span class="go">       [-0.70682518,  0.61242835,  0.35401931,  0.        ],</span>
<span class="go">       [ 0.        ,  0.        ,  0.        ,  1.        ]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arboris.homogeneousmatrix.rotz">
<tt class="descclassname">arboris.homogeneousmatrix.</tt><tt class="descname">rotz</tt><big>(</big><em>angle</em><big>)</big><a class="headerlink" href="#arboris.homogeneousmatrix.rotz" title="Permalink to this definition">¶</a></dt>
<dd><p>Homogeneous matrix of a rotation around the z-axis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>angle</strong> (<em>float</em>) &#8211; angle around z-axis in radian</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">homogeneous matrix</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">(4,4)-array</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rotz</span><span class="p">(</span><span class="mf">3.14</span><span class="o">/</span><span class="mi">6</span><span class="p">)</span>
<span class="go">array([[ 0.86615809, -0.4997701 ,  0.        ,  0.        ],</span>
<span class="go">       [ 0.4997701 ,  0.86615809,  0.        ,  0.        ],</span>
<span class="go">       [ 0.        ,  0.        ,  1.        ,  0.        ],</span>
<span class="go">       [ 0.        ,  0.        ,  0.        ,  1.        ]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arboris.homogeneousmatrix.rotzx">
<tt class="descclassname">arboris.homogeneousmatrix.</tt><tt class="descname">rotzx</tt><big>(</big><em>angle_z</em>, <em>angle_x</em><big>)</big><a class="headerlink" href="#arboris.homogeneousmatrix.rotzx" title="Permalink to this definition">¶</a></dt>
<dd><p>Homogeneous transformation matrix from roll-yaw angles.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>angle_z</strong> (<em>float</em>) &#8211; yaw angle in radian</li>
<li><strong>angle_x</strong> (<em>float</em>) &#8211; roll angle in radian</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">homogeneous matrix of the roll-yaw orientation</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(4,4)-array</p>
</td>
</tr>
</tbody>
</table>
<p>In short, return: R = R_{z} * R_{x}</p>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rotzx</span><span class="p">(</span><span class="mf">3.14</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mf">3.14</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
<span class="go">array([[ 0.86615809, -0.25011479,  0.43268088,  0.        ],</span>
<span class="go">       [ 0.4997701 ,  0.43347721, -0.74988489,  0.        ],</span>
<span class="go">       [ 0.        ,  0.86575984,  0.50045969,  0.        ],</span>
<span class="go">       [ 0.        ,  0.        ,  0.        ,  1.        ]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arboris.homogeneousmatrix.rotzy">
<tt class="descclassname">arboris.homogeneousmatrix.</tt><tt class="descname">rotzy</tt><big>(</big><em>angle_z</em>, <em>angle_y</em><big>)</big><a class="headerlink" href="#arboris.homogeneousmatrix.rotzy" title="Permalink to this definition">¶</a></dt>
<dd><p>Homogeneous transformation matrix from pitch-yaw angles.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>angle_z</strong> (<em>float</em>) &#8211; yaw angle in radian</li>
<li><strong>angle_y</strong> (<em>float</em>) &#8211; pitch angle in radian</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">homogeneous matrix of the pitch-yaw orientation</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(4,4)-array</p>
</td>
</tr>
</tbody>
</table>
<p>In short, return: R = R_{z} * R_{y}</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rotzy</span><span class="p">(</span><span class="mf">3.14</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mf">3.14</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>
<span class="go">array([[ 0.61271008, -0.4997701 ,  0.61222235,  0.        ],</span>
<span class="go">       [ 0.35353151,  0.86615809,  0.35325009,  0.        ],</span>
<span class="go">       [-0.70682518,  0.        ,  0.70738827,  0.        ],</span>
<span class="go">       [ 0.        ,  0.        ,  0.        ,  1.        ]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arboris.homogeneousmatrix.rotzyx">
<tt class="descclassname">arboris.homogeneousmatrix.</tt><tt class="descname">rotzyx</tt><big>(</big><em>angle_z</em>, <em>angle_y</em>, <em>angle_x</em><big>)</big><a class="headerlink" href="#arboris.homogeneousmatrix.rotzyx" title="Permalink to this definition">¶</a></dt>
<dd><p>Homogeneous transformation matrix from roll-pitch-yaw angles.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>angle_z</strong> (<em>float</em>) &#8211; yaw angle in radian</li>
<li><strong>angle_y</strong> (<em>float</em>) &#8211; pitch angle in radian</li>
<li><strong>angle_x</strong> (<em>float</em>) &#8211; roll angle in radian</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">homogeneous matrix of the roll-pitch-yaw orientation</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(4,4)-array</p>
</td>
</tr>
</tbody>
</table>
<p>In short, return: R = R_{z} * R_{y} * R_{x}</p>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rotzyx</span><span class="p">(</span><span class="mf">3.14</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mf">3.14</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span> <span class="mf">3.14</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
<span class="go">array([[ 0.61271008,  0.27992274,  0.73907349,  0.        ],</span>
<span class="go">       [ 0.35353151,  0.73930695, -0.57309746,  0.        ],</span>
<span class="go">       [-0.70682518,  0.61242835,  0.35401931,  0.        ],</span>
<span class="go">       [ 0.        ,  0.        ,  0.        ,  1.        ]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arboris.homogeneousmatrix.rotzyx_angles">
<tt class="descclassname">arboris.homogeneousmatrix.</tt><tt class="descname">rotzyx_angles</tt><big>(</big><em>H</em><big>)</big><a class="headerlink" href="#arboris.homogeneousmatrix.rotzyx_angles" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the roll-pitch-yaw angles corresponding to the rotation matrix of <img class="math" src="_images/math/b578832a9c7fc5ceedc1cdd68da5adbcb33f4ee3.png" alt="\H"/>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>H</strong> (<em>(4,4)-array</em>) &#8211; homogeneous matrix</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">angles of roll pitch yaw</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">(3,)-array</td>
</tr>
</tbody>
</table>
<p>Returns the angles such that <img class="math" src="_images/math/47e92e96954622ff02a92773759eef87f031bc9f.png" alt="H[0:3, 0:3] = R_z(a_z) R_y(a_y) R_x(a_x)"/>.</p>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">angles</span> <span class="o">=</span> <span class="n">array</span><span class="p">((</span><span class="mf">3.14</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="mf">3.14</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">rotzyx_angles</span><span class="p">(</span><span class="n">rotzyx</span><span class="p">(</span><span class="o">*</span><span class="n">angles</span><span class="p">))</span> <span class="o">==</span> <span class="n">angles</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arboris.homogeneousmatrix.transl">
<tt class="descclassname">arboris.homogeneousmatrix.</tt><tt class="descname">transl</tt><big>(</big><em>t_x</em>, <em>t_y</em>, <em>t_z</em><big>)</big><a class="headerlink" href="#arboris.homogeneousmatrix.transl" title="Permalink to this definition">¶</a></dt>
<dd><p>Homogeneous matrix of a translation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>t_x, t_y, t_z</strong> (<em>float</em>) &#8211; coordinates of the translation vector in 3d space</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">homogeneous matrix of the translation</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">(4,4)-array</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">transl</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">)</span>
<span class="go">array([[ 1.,  0.,  0.,  1.],</span>
<span class="go">       [ 0.,  1.,  0.,  2.],</span>
<span class="go">       [ 0.,  0.,  1.,  3.],</span>
<span class="go">       [ 0.,  0.,  0.,  1.]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arboris.homogeneousmatrix.vdot">
<tt class="descclassname">arboris.homogeneousmatrix.</tt><tt class="descname">vdot</tt><big>(</big><em>H</em>, <em>vec</em><big>)</big><a class="headerlink" href="#arboris.homogeneousmatrix.vdot" title="Permalink to this definition">¶</a></dt>
<dd><p>Frame displacement for a vector.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>H</strong> (<em>(4,4)-array</em>) &#8211; the homogeneous matrix to check</li>
<li><strong>vec</strong> (<em>(3,)-array</em>) &#8211; point one wants to displace</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the displaced point</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(3,)-array</p>
</td>
</tr>
</tbody>
</table>
<p><img class="math" src="_images/math/7c0eab967ff041cd55db66ee8c28f9b3a4ce0642.png" alt="\ve{a} = \R_{ab}  \ve{b}"/>, where <img class="math" src="_images/math/09fba51b294de6468a25a4aa723a589760f0e47d.png" alt="\R_{ab}"/> is the
rotation matrix from <img class="math" src="_images/math/849d6eee6481724f60866d69462cb36e05149ad7.png" alt="\Frame{a}"/> to <img class="math" src="_images/math/485e3ea953ae8036f46dc97f3e26def2dec9801b.png" alt="\Frame{b}"/>, and <img class="math" src="_images/math/901cb34eb94d3dcb3c490f2be94b5912b9a473c2.png" alt="\ve{b}"/> is
the vector expressed in <img class="math" src="_images/math/485e3ea953ae8036f46dc97f3e26def2dec9801b.png" alt="\Frame{b}"/>.</p>
</dd></dl>

<dl class="function">
<dt id="arboris.homogeneousmatrix.zaligned">
<tt class="descclassname">arboris.homogeneousmatrix.</tt><tt class="descname">zaligned</tt><big>(</big><em>vec</em><big>)</big><a class="headerlink" href="#arboris.homogeneousmatrix.zaligned" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an homogeneous matrix whose z-axis is colinear vith <em>vec</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vec</strong> (<em>(3,)-array</em>) &#8211; input vector, assumed to be normalized</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">homogeneous matrix of the frame aligned with vec</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">(4,4)-array</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">zaligned</span><span class="p">((</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">))</span>
<span class="go">array([[-0.,  0.,  1.,  0.],</span>
<span class="go">       [ 0., -1.,  0.,  0.],</span>
<span class="go">       [ 1.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  1.]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-arboris.adjointmatrix">
<span id="adjointmatrix"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">adjointmatrix</span></tt><a class="headerlink" href="#module-arboris.adjointmatrix" title="Permalink to this headline">¶</a></h2>
<p>Functions for working with adjoint matrices.</p>
<p>considering an homogeneous matrix <img class="math" src="_images/math/b578832a9c7fc5ceedc1cdd68da5adbcb33f4ee3.png" alt="\H"/>, the related adjoint matrix <img class="math" src="_images/math/9939bbea3fcc86fd4000dc6cb1a2a62688b302fe.png" alt="\Ad"/> is defined as follows</p>
<div class="math">
<p><img src="_images/math/6a0310203cb90b095e83332d0f2f8d48fe3cad1c.png" alt="\H = \begin{bmatrix}
        \R  &amp;  \pt  \\
        0   &amp;  1
      \end{bmatrix}
\hspace{50px}
\Ad(\H) =  \begin{bmatrix}
                \R                &amp;  0_{3}    \\
                \skew{\pt} \R     &amp;  \R
            \end{bmatrix}"/></p>
</div><dl class="function">
<dt id="arboris.adjointmatrix.inv">
<tt class="descclassname">arboris.adjointmatrix.</tt><tt class="descname">inv</tt><big>(</big><em>Ad</em><big>)</big><a class="headerlink" href="#arboris.adjointmatrix.inv" title="Permalink to this definition">¶</a></dt>
<dd><p>Invert an adjoint matrix.</p>
</dd></dl>

<dl class="function">
<dt id="arboris.adjointmatrix.isadjointmatrix">
<tt class="descclassname">arboris.adjointmatrix.</tt><tt class="descname">isadjointmatrix</tt><big>(</big><em>Ad</em><big>)</big><a class="headerlink" href="#arboris.adjointmatrix.isadjointmatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Return true if <em>Ad</em> is an adjoint matrix.</p>
</dd></dl>

</div>
<div class="section" id="module-arboris.twistvector">
<span id="twistvector"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">twistvector</span></tt><a class="headerlink" href="#module-arboris.twistvector" title="Permalink to this headline">¶</a></h2>
<p>Functions for working with twists stored as [w,v]</p>
<dl class="function">
<dt id="arboris.twistvector.adjacency">
<tt class="descclassname">arboris.twistvector.</tt><tt class="descname">adjacency</tt><big>(</big><em>tw</em><big>)</big><a class="headerlink" href="#arboris.twistvector.adjacency" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the adjacency matrix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tw</strong> (<em>(6,)-array</em>) &#8211; a twist to build the adjacency matrix.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">(6,6)-array</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="mf">11.</span><span class="p">,</span> <span class="mf">12.</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adjacency</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">array([[  0.,  -3.,   2.,   0.,   0.,   0.],</span>
<span class="go">       [  3.,   0.,  -1.,   0.,   0.,   0.],</span>
<span class="go">       [ -2.,   1.,   0.,   0.,   0.,   0.],</span>
<span class="go">       [  0., -12.,  11.,   0.,  -3.,   2.],</span>
<span class="go">       [ 12.,   0., -10.,   3.,   0.,  -1.],</span>
<span class="go">       [-11.,  10.,   0.,  -2.,   1.,   0.]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arboris.twistvector.exp">
<tt class="descclassname">arboris.twistvector.</tt><tt class="descname">exp</tt><big>(</big><em>tw</em><big>)</big><a class="headerlink" href="#arboris.twistvector.exp" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the exponential of the twist matrix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tw</strong> (<em>(6,)-array</em>) &#8211; a twist to build the adjacency matrix.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a homogeneous matrix corresponding to the displacement generated by the twist in 1 second.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">(4,4)-array</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="mf">11.</span><span class="p">,</span> <span class="mf">12.</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exp</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">array([[ -0.69492056,   0.71352099,   0.08929286,   2.90756949],</span>
<span class="go">       [ -0.19200697,  -0.30378504,   0.93319235,  11.86705709],</span>
<span class="go">       [  0.69297817,   0.6313497 ,   0.34810748,  13.78610544],</span>
<span class="go">       [  0.        ,   0.        ,   0.        ,   1.        ]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-arboris.massmatrix">
<span id="massmatrix"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">massmatrix</span></tt><a class="headerlink" href="#module-arboris.massmatrix" title="Permalink to this headline">¶</a></h2>
<p>Functions for working with mass matrices.</p>
<dl class="function">
<dt id="arboris.massmatrix.box">
<tt class="descclassname">arboris.massmatrix.</tt><tt class="descname">box</tt><big>(</big><em>half_extents</em>, <em>mass</em><big>)</big><a class="headerlink" href="#arboris.massmatrix.box" title="Permalink to this definition">¶</a></dt>
<dd><p>Mass matrix of an homogeneous parallelepiped.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>half_extents</strong> (<em>(3,)-array</em>) &#8211; the half dimension (in <strong>m</strong>) of the box along x, y, z</li>
<li><strong>mass</strong> (<em>float</em>) &#8211; the box mass in <strong>kg</strong></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">box</span><span class="p">((</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">4.</span><span class="p">,</span> <span class="mf">6.</span><span class="p">),</span> <span class="mf">3.</span><span class="p">)</span>
<span class="go">array([[ 52.,   0.,   0.,   0.,   0.,   0.],</span>
<span class="go">       [  0.,  40.,   0.,   0.,   0.,   0.],</span>
<span class="go">       [  0.,   0.,  20.,   0.,   0.,   0.],</span>
<span class="go">       [  0.,   0.,   0.,   3.,   0.,   0.],</span>
<span class="go">       [  0.,   0.,   0.,   0.,   3.,   0.],</span>
<span class="go">       [  0.,   0.,   0.,   0.,   0.,   3.]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arboris.massmatrix.cylinder">
<tt class="descclassname">arboris.massmatrix.</tt><tt class="descname">cylinder</tt><big>(</big><em>length</em>, <em>radius</em>, <em>mass</em><big>)</big><a class="headerlink" href="#arboris.massmatrix.cylinder" title="Permalink to this definition">¶</a></dt>
<dd><p>Mass matrix of a homogeneous cylinder, with symmetry along z-axis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>length</strong> (<em>float</em>) &#8211; the cylinder length in <strong>m</strong> along z-axis</li>
<li><strong>radius</strong> (<em>float</em>) &#8211; the cylinder radius in <strong>m</strong></li>
<li><strong>mass</strong> (<em>float</em>) &#8211; the cylinder mass in <strong>kg</strong></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cylinder</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">12.</span><span class="p">)</span>
<span class="go">array([[  1.03,   0.  ,   0.  ,   0.  ,   0.  ,   0.  ],</span>
<span class="go">       [  0.  ,   1.03,   0.  ,   0.  ,   0.  ,   0.  ],</span>
<span class="go">       [  0.  ,   0.  ,   0.06,   0.  ,   0.  ,   0.  ],</span>
<span class="go">       [  0.  ,   0.  ,   0.  ,  12.  ,   0.  ,   0.  ],</span>
<span class="go">       [  0.  ,   0.  ,   0.  ,   0.  ,  12.  ,   0.  ],</span>
<span class="go">       [  0.  ,   0.  ,   0.  ,   0.  ,   0.  ,  12.  ]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arboris.massmatrix.ellipsoid">
<tt class="descclassname">arboris.massmatrix.</tt><tt class="descname">ellipsoid</tt><big>(</big><em>radii</em>, <em>mass</em><big>)</big><a class="headerlink" href="#arboris.massmatrix.ellipsoid" title="Permalink to this definition">¶</a></dt>
<dd><p>Mass matrix of an homogeneous ellipsoid.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>radii</strong> (<em>(3,)-array</em>) &#8211; the principal radii (in <strong>m</strong>) of the ellipsoid along x, y, z</li>
<li><strong>mass</strong> (<em>float</em>) &#8211; the ellipsoid mass in <strong>kg</strong></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ellipsoid</span><span class="p">((</span><span class="mf">3.</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mf">2.</span><span class="p">),</span> <span class="mf">5.</span><span class="p">)</span>
<span class="go">array([[  5.,   0.,   0.,   0.,   0.,   0.],</span>
<span class="go">       [  0.,  13.,   0.,   0.,   0.,   0.],</span>
<span class="go">       [  0.,   0.,  10.,   0.,   0.,   0.],</span>
<span class="go">       [  0.,   0.,   0.,   5.,   0.,   0.],</span>
<span class="go">       [  0.,   0.,   0.,   0.,   5.,   0.],</span>
<span class="go">       [  0.,   0.,   0.,   0.,   0.,   5.]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arboris.massmatrix.ismassmatrix">
<tt class="descclassname">arboris.massmatrix.</tt><tt class="descname">ismassmatrix</tt><big>(</big><em>M</em>, <em>semi=False</em><big>)</big><a class="headerlink" href="#arboris.massmatrix.ismassmatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether M is a valid mass matrix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>M</strong> (<em>(6,6)-array</em>) &#8211; the mass matrix to check</li>
<li><strong>semi</strong> (<em>bool</em>) &#8211; if set to <tt class="docutils literal"><span class="pre">True</span></tt>, positive <em>semi</em>-definite matrices
are also considered valid.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><tt class="docutils literal"><span class="pre">True</span></tt> if M is correctly shaped and symmetric positive definite.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="arboris.massmatrix.principalframe">
<tt class="descclassname">arboris.massmatrix.</tt><tt class="descname">principalframe</tt><big>(</big><em>M</em><big>)</big><a class="headerlink" href="#arboris.massmatrix.principalframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the principal frame of inertia of a mass matrix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>M</strong> (<em>(6,6)-array</em>) &#8211; mass matrix expressed in any frame (say <img class="math" src="_images/math/1ec73c8f8bc00d75cba5f48b5ca1f75b5e8b6c7d.png" alt="a"/>)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the homogeneous matrix <img class="math" src="_images/math/4fb24e6665eff568795fab6c203cff851a7e600e.png" alt="\H_{am}"/> from <img class="math" src="_images/math/1ec73c8f8bc00d75cba5f48b5ca1f75b5e8b6c7d.png" alt="a"/> to principal frame (say <img class="math" src="_images/math/1cbb4920edcfc30607422d69259f0edd9826011e.png" alt="m"/>)</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">(4,4)-array</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">M_a</span> <span class="o">=</span> <span class="n">diag</span><span class="p">((</span><span class="mf">3.</span><span class="p">,</span><span class="mf">2.</span><span class="p">,</span><span class="mf">4.</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H_ab</span> <span class="o">=</span> <span class="n">Hg</span><span class="o">.</span><span class="n">transl</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">M_b</span> <span class="o">=</span> <span class="n">transport</span><span class="p">(</span><span class="n">M_a</span><span class="p">,</span> <span class="n">H_ab</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H_ba</span> <span class="o">=</span> <span class="n">principalframe</span><span class="p">(</span><span class="n">M_b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dot</span><span class="p">(</span><span class="n">H_ab</span><span class="p">,</span> <span class="n">H_ba</span><span class="p">)</span>
<span class="go">array([[ 1.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  1.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  1.]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arboris.massmatrix.sphere">
<tt class="descclassname">arboris.massmatrix.</tt><tt class="descname">sphere</tt><big>(</big><em>radius</em>, <em>mass</em><big>)</big><a class="headerlink" href="#arboris.massmatrix.sphere" title="Permalink to this definition">¶</a></dt>
<dd><p>Mass matrix of an homogeneous sphere.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>radius</strong> (<em>float</em>) &#8211; the sphere radius in <strong>m</strong></li>
<li><strong>mass</strong> (<em>float</em>) &#8211; the sphere mass in <strong>kg</strong></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sphere</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">5.</span><span class="p">)</span>
<span class="go">array([[ 2.,  0.,  0.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  2.,  0.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  2.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  5.,  0.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  0.,  5.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  0.,  0.,  5.]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="arboris.massmatrix.transport">
<tt class="descclassname">arboris.massmatrix.</tt><tt class="descname">transport</tt><big>(</big><em>M</em>, <em>H</em><big>)</big><a class="headerlink" href="#arboris.massmatrix.transport" title="Permalink to this definition">¶</a></dt>
<dd><p>Transport (express) the mass matrix into another frame.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>M</strong> (<em>(6,6)-array</em>) &#8211; the mass matrix expressed in the original frame (say, <img class="math" src="_images/math/1ec73c8f8bc00d75cba5f48b5ca1f75b5e8b6c7d.png" alt="a"/>)</li>
<li><strong>H</strong> (<em>(4,4)-array</em>) &#8211; homogeneous matrix from the new frame (say <img class="math" src="_images/math/d5a28a80cbbc63e6935bff634aef049fab9dfbaf.png" alt="b"/>) to the
original one: <img class="math" src="_images/math/cadfa3e708aac692b172a94fce541dc5cc34de0c.png" alt="H_{ab}"/></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the mass matrix expressed in the new frame (say, <img class="math" src="_images/math/d5a28a80cbbc63e6935bff634aef049fab9dfbaf.png" alt="b"/>)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(6,6)-array</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">M_a</span> <span class="o">=</span> <span class="n">diag</span><span class="p">((</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">4.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H_ab</span> <span class="o">=</span> <span class="n">Hg</span><span class="o">.</span><span class="n">transl</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">M_b</span> <span class="o">=</span> <span class="n">transport</span><span class="p">(</span><span class="n">M_a</span><span class="p">,</span> <span class="n">H_ab</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">allclose</span><span class="p">(</span><span class="n">M_b</span><span class="p">,</span> <span class="p">[[</span> <span class="mf">12.</span><span class="p">,</span>  <span class="o">-</span><span class="mf">3.</span><span class="p">,</span>   <span class="mf">0.</span><span class="p">,</span>   <span class="mf">0.</span><span class="p">,</span>   <span class="mf">0.</span><span class="p">,</span>  <span class="o">-</span><span class="mf">3.</span><span class="p">],</span>
<span class="gp">... </span>               <span class="p">[</span> <span class="o">-</span><span class="mf">3.</span><span class="p">,</span>   <span class="mf">3.</span><span class="p">,</span>   <span class="mf">0.</span><span class="p">,</span>   <span class="mf">0.</span><span class="p">,</span>   <span class="mf">0.</span><span class="p">,</span>   <span class="mf">1.</span><span class="p">],</span>
<span class="gp">... </span>               <span class="p">[</span>  <span class="mf">0.</span><span class="p">,</span>   <span class="mf">0.</span><span class="p">,</span>  <span class="mf">14.</span><span class="p">,</span>   <span class="mf">3.</span><span class="p">,</span>  <span class="o">-</span><span class="mf">1.</span><span class="p">,</span>   <span class="mf">0.</span><span class="p">],</span>
<span class="gp">... </span>               <span class="p">[</span>  <span class="mf">0.</span><span class="p">,</span>   <span class="mf">0.</span><span class="p">,</span>   <span class="mf">3.</span><span class="p">,</span>   <span class="mf">1.</span><span class="p">,</span>   <span class="mf">0.</span><span class="p">,</span>   <span class="mf">0.</span><span class="p">],</span>
<span class="gp">... </span>               <span class="p">[</span>  <span class="mf">0.</span><span class="p">,</span>   <span class="mf">0.</span><span class="p">,</span>  <span class="o">-</span><span class="mf">1.</span><span class="p">,</span>   <span class="mf">0.</span><span class="p">,</span>   <span class="mf">1.</span><span class="p">,</span>   <span class="mf">0.</span><span class="p">],</span>
<span class="gp">... </span>               <span class="p">[</span> <span class="o">-</span><span class="mf">3.</span><span class="p">,</span>   <span class="mf">1.</span><span class="p">,</span>   <span class="mf">0.</span><span class="p">,</span>   <span class="mf">0.</span><span class="p">,</span>   <span class="mf">0.</span><span class="p">,</span>   <span class="mf">1.</span><span class="p">]])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ismassmatrix</span><span class="p">(</span><span class="n">M_b</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H_ab</span> <span class="o">=</span> <span class="n">Hg</span><span class="o">.</span><span class="n">rotx</span><span class="p">(</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">M_b</span> <span class="o">=</span> <span class="n">transport</span><span class="p">(</span><span class="n">M_a</span><span class="p">,</span> <span class="n">H_ab</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">allclose</span><span class="p">(</span><span class="n">M_b</span><span class="p">,</span> <span class="p">[[</span> <span class="mf">3.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">],</span>
<span class="gp">... </span>               <span class="p">[</span> <span class="mf">0.</span><span class="p">,</span>  <span class="mf">3.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">],</span>
<span class="gp">... </span>               <span class="p">[</span> <span class="mf">0.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span>  <span class="mf">3.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">],</span>
<span class="gp">... </span>               <span class="p">[</span> <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">],</span>
<span class="gp">... </span>               <span class="p">[</span> <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">],</span>
<span class="gp">... </span>               <span class="p">[</span> <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">]])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ismassmatrix</span><span class="p">(</span><span class="n">M_b</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Modules</a><ul>
<li><a class="reference internal" href="#core-the-core-of-the-simulator"><tt class="docutils literal"><span class="pre">core</span></tt> &#8211; The core of the simulator</a></li>
<li><a class="reference internal" href="#module-arboris.joints"><tt class="docutils literal"><span class="pre">joints</span></tt> - Concrete joint implementations</a></li>
<li><a class="reference internal" href="#module-arboris.observers"><tt class="docutils literal"><span class="pre">observers</span></tt> - Get world information</a></li>
<li><a class="reference internal" href="#module-arboris.shapes"><tt class="docutils literal"><span class="pre">shapes</span></tt> - For collision &amp; display</a></li>
<li><a class="reference internal" href="#module-arboris.robots.human36"><tt class="docutils literal"><span class="pre">human36</span></tt></a></li>
<li><a class="reference internal" href="#module-arboris.homogeneousmatrix"><tt class="docutils literal"><span class="pre">homogeneousmatrix</span></tt></a></li>
<li><a class="reference internal" href="#module-arboris.adjointmatrix"><tt class="docutils literal"><span class="pre">adjointmatrix</span></tt></a></li>
<li><a class="reference internal" href="#module-arboris.twistvector"><tt class="docutils literal"><span class="pre">twistvector</span></tt></a></li>
<li><a class="reference internal" href="#module-arboris.massmatrix"><tt class="docutils literal"><span class="pre">massmatrix</span></tt></a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="visu.html"
                        title="previous chapter">Visualization</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="notations.html"
                        title="next chapter">Notations</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/modules.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="notations.html" title="Notations"
             >next</a> |</li>
        <li class="right" >
          <a href="visu.html" title="Visualization"
             >previous</a> |</li>
        <li><a href="index.html">arboris-python 0.2.0-28-gd9f91f4 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009, Sebastien BARTHELEMY.
      Last updated on Jan 02, 2018.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>